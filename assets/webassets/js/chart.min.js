!function(){"use strict";function t(t,i){var n,e=((n={})[0]=[],n[1]=[t.lineWidth,t.lineWidth],n[2]=[2*t.lineWidth,2*t.lineWidth],n[3]=[6*t.lineWidth,6*t.lineWidth],n[4]=[t.lineWidth,4*t.lineWidth],n)[i];t.setLineDash(e)}function i(t,i,n,e){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(n,i+s),t.lineTo(e,i+s),t.stroke()}(V=O||(O={}))[V.Simple=0]="Simple",V[V.WithSteps=1]="WithSteps",(Y=K||(K={}))[Y.Solid=0]="Solid",Y[Y.Dotted=1]="Dotted",Y[Y.Dashed=2]="Dashed",Y[Y.LargeDashed=3]="LargeDashed",Y[Y.SparseDotted=4]="SparseDotted";var n=function(t,i){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)};function e(t,i){if("function"!=typeof i&&null!==i)throw TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}var s=function(){return(s=Object.assign||function(t){for(var i,n=1,e=arguments.length;n<e;n++)for(var s in i=arguments[n])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t}).apply(this,arguments)};function r(t,i){for(var n=0,e=i.length,s=t.length;n<e;n++,s++)t[s]=i[n];return t}function o(t,i){if(!t)throw Error("Assertion failed"+(i?": "+i:""))}function h(t){if(void 0===t)throw Error("Value is undefined");return t}function u(t){if(null===t)throw Error("Value is null");return t}function l(t){return u(h(t))}function a(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var e=0,s=i;e<s.length;e++){var r=s[e];for(var o in r)void 0!==r[o]&&("object"!=typeof r[o]||void 0===t[o]?t[o]=r[o]:a(t[o],r[o]))}return t}function c(t){return"number"==typeof t&&isFinite(t)}function f(t){return"number"==typeof t&&t%1==0}function p(t){return"string"==typeof t}function v(t){return"boolean"==typeof t}function d(t){var i,n,e,s=t;if(!s||"object"!=typeof s)return s;for(n in i=Array.isArray(s)?[]:{},s)s.hasOwnProperty(n)&&(e=s[n],i[n]=e&&"object"==typeof e?d(e):e);return i}function y(t){return null!==t}function $(t){return null===t?void 0:t}var g=function(){function t(){this.t=[]}return t.prototype.i=function(t){this.t=t},t.prototype.h=function(t,i,n,e){this.t.forEach(function(s){t.save(),s.h(t,i,n,e),t.restore()})},t}(),m=function(){function t(){}return t.prototype.h=function(t,i,n,e){t.save(),t.scale(i,i),this.u(t,n,e),t.restore()},t.prototype.o=function(t,i,n,e){t.save(),t.scale(i,i),this.l(t,n,e),t.restore()},t.prototype.l=function(t,i,n){},t}(),w=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return e(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&null!==this.v.M){var i=this.v.M,n=this.v,e=function(e){t.beginPath();for(var s=i.to-1;s>=i.from;--s){var r=n.m[s];t.moveTo(r.g,r.p),t.arc(r.g,r.p,e,0,2*Math.PI)}t.fill()};t.fillStyle=n.k,e(n.N+2),t.fillStyle=n.S,e(n.N)}},i}(m),_={from:0,to:1},b=function(){function t(t,i){this.C=new g,this.D=[],this.T=[],this.L=new Map,this.B=t,this.A=i,this.C.i(this.D)}return t.prototype.V=function(t){var i=this,n=this.B.O();n.length!==this.D.length&&(this.T=n.map(function(){return{m:[{g:0,p:0,P:0,F:0}],S:"",k:i.B.I().layout.backgroundColor,N:0,M:null}}),this.D=this.T.map(function(t){var i=new w;return i._(t),i}),this.C.i(this.D)),this.L.clear()},t.prototype.W=function(t,i,n,e){var s=this.L.get(n);if(!s){s=this.R(n),this.L.set(n,s);var r=new g;return r.i(s),r}var o=new g;return o.i(s),o},t.prototype.R=function(t){var i=this,n=this.B.O().map(function(t,i){return[t,i]}).filter(function(i){return t.j().includes(i[0])}),e=this.A.U(),s=this.B.q();return n.map(function(t){var n=t[0],r=t[1],o=i.T[r],h=n.H(e);if(null!==h&&n.Y()){var l=u(n.K());o.S=h.$,o.k=h.X,o.N=h.N,o.m[0].F=h.F,o.m[0].p=n.J().Z(h.F,l.G),o.m[0].P=e,o.m[0].g=s.tt(e),o.M=_}else o.M=null;return i.D[r]})},t}(),S=function(){function n(t){this.it=t}return n.prototype.h=function(n,e,s,r){if(null!==this.it){var o=this.it.nt.Y,h=this.it.ht.Y;if(o||h){n.save();var u=Math.round(this.it.g*e),l=Math.round(this.it.p*e),a=Math.ceil(this.it.st*e),c=Math.ceil(this.it.rt*e);n.lineCap="butt",o&&u>=0&&(n.lineWidth=Math.floor(this.it.nt.et*e),n.strokeStyle=this.it.nt.ut,n.fillStyle=this.it.nt.ut,t(n,this.it.nt.at),function(t,i,n,e){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(i+s,0),t.lineTo(i+s,e),t.stroke()}(n,u,0,c)),h&&l>=0&&(n.lineWidth=Math.floor(this.it.ht.et*e),n.strokeStyle=this.it.ht.ut,n.fillStyle=this.it.ht.ut,t(n,this.it.ht.at),i(n,l,0,a)),n.restore()}}},n}(),x=function(){function t(t){this.L=new Map,this.ot={nt:{et:1,at:0,ut:"",Y:!1},ht:{et:1,at:0,ut:"",Y:!1},st:0,rt:0,g:0,p:0},this.lt=new S(this.ot),this.ft=t}return t.prototype.V=function(){this.L.clear()},t.prototype.W=function(t,i,n){return this.R(n),this.lt},t.prototype.R=function(t){var i=this.ft.Y(),n=u(this.ft.vt()).ct().I().crosshair,e=this.ot;e.ht.Y=i&&this.ft._t(t),e.nt.Y=i&&this.ft.dt(),e.ht.et=n.horzLine.width,e.ht.at=n.horzLine.style,e.ht.ut=n.horzLine.color,e.nt.et=n.vertLine.width,e.nt.at=n.vertLine.style,e.nt.ut=n.vertLine.color,e.st=t.wt(),e.rt=t.Mt(),e.g=this.ft.bt(),e.p=this.ft.gt()},t}(),C={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function P(t){return t<0?0:t>255?255:Math.round(t)||0}var M=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,F=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,I=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,k=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function T(t){var i,n=function(t){var i;if((t=t.toLowerCase())in C&&(t=C[t]),i=k.exec(t)||I.exec(t))return[P(parseInt(i[1],10)),P(parseInt(i[2],10)),P(parseInt(i[3],10))];if(i=F.exec(t))return[P(parseInt(i[1],16)),P(parseInt(i[2],16)),P(parseInt(i[3],16))];if(i=M.exec(t))return[P(17*parseInt(i[1],16)),P(17*parseInt(i[2],16)),P(17*parseInt(i[3],16))];throw Error("Cannot parse color: "+t)}(t);return{yt:"rgb("+n[0]+", "+n[1]+", "+n[2]+")",kt:.199*(i=n)[0]+.687*i[1]+.114*i[2]>160?"black":"white"}}function E(t,i,n,e,s,r){t.fillRect(i+r,n,e-2*r,r),t.fillRect(i+r,n+s-r,e-2*r,r),t.fillRect(i,n,r,s),t.fillRect(i+e-r,n,r,s)}function L(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function D(t,i,n,e,s,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,n,e,s),t.restore()}var V,Y,O,K,R,z,B=function(){function t(t,i){this._(t,i)}return t.prototype._=function(t,i){this.it=t,this.xt=i},t.prototype.h=function(t,i,n,e,s,r){if(this.it.Y){t.font=i.Nt;var o=this.it.St||!this.it.Ct?i.Dt:0,h=i.Tt,u=i.Et,l=i.Lt,a=i.Bt,c=i.At,f=this.it.Vt,p=Math.ceil(n.Ot(t,f)),v=i.zt,d=i.Pt+u+l,y=h+p+a+c+o,$=this.xt.Ft;this.xt.It&&($=this.xt.It);var g,m,w=($=Math.round($))-Math.ceil(.5*d),_=w+d,b="left"===s,S=b?e:0,x=Math.ceil(e*r),C=S;if(t.fillStyle=this.xt.yt,t.lineWidth=1,t.lineCap="butt",f){b?(g=S-o,m=(C=S-y)+c):(C=S+y,g=S+o,m=S+h+o+a);var P=Math.max(1,Math.floor(r)),M=Math.max(1,Math.floor(h*r)),F=b?x:0,I=Math.round(w*r),k=Math.round(C*r),T=Math.round($*r)-Math.floor(.5*r),E=T+P+(T-I),D=Math.round(g*r);t.save(),t.beginPath(),t.moveTo(F,I),t.lineTo(k,I),t.lineTo(k,E),t.lineTo(F,E),t.fill(),t.fillStyle=this.it.X,t.fillRect(b?x-M:0,I,M,E-I),this.it.St&&(t.fillStyle=this.xt.ut,t.fillRect(F,T,D-F,P)),t.textAlign="left",t.fillStyle=this.xt.ut,L(t,r,function(){t.fillText(f,m,_-l-v)}),t.restore()}}},t.prototype.Mt=function(t,i){return this.it.Y?t.Pt+t.Et+t.Lt:0},t}(),U=function(){function t(t){this.Wt={Ft:0,ut:"#FFF",yt:"#000"},this.Rt={Vt:"",Y:!1,St:!0,Ct:!1,X:""},this.jt={Vt:"",Y:!1,St:!1,Ct:!0,X:""},this.Ut=!0,this.qt=new(t||B)(this.Rt,this.Wt),this.Ht=new(t||B)(this.jt,this.Wt)}return t.prototype.Vt=function(){return this.Rt.Vt},t.prototype.Ft=function(){return this.Yt(),this.Wt.Ft},t.prototype.V=function(){this.Ut=!0},t.prototype.Mt=function(t,i){return void 0===i&&(i=!1),Math.max(this.qt.Mt(t,i),this.Ht.Mt(t,i))},t.prototype.Kt=function(){return this.Wt.It||0},t.prototype.$t=function(t){this.Wt.It=t},t.prototype.Xt=function(){return this.Yt(),this.Rt.Y||this.jt.Y},t.prototype.Zt=function(){return this.Yt(),this.Rt.Y},t.prototype.W=function(t){return this.Yt(),this.Rt.St=this.Rt.St&&t.I().drawTicks,this.jt.St=this.jt.St&&t.I().drawTicks,this.qt._(this.Rt,this.Wt),this.Ht._(this.jt,this.Wt),this.qt},t.prototype.Jt=function(){return this.Yt(),this.qt._(this.Rt,this.Wt),this.Ht._(this.jt,this.Wt),this.Ht},t.prototype.Yt=function(){this.Ut&&(this.Rt.St=!0,this.jt.St=!1,this.Gt(this.Rt,this.jt,this.Wt))},t}(),W=function(t){function i(i,n,e){var s=t.call(this)||this;return s.ft=i,s.Qt=n,s.ti=e,s}return e(i,t),i.prototype.Gt=function(t,i,n){t.Y=!1;var e=this.ft.I().horzLine;if(e.labelVisible){var s=this.Qt.K();if(this.ft.Y()&&!this.Qt.ii()&&null!==s){var r=T(e.labelBackgroundColor);n.yt=r.yt,n.ut=r.kt;var o=this.ti(this.Qt);n.Ft=o.Ft,t.Vt=this.Qt.ni(o.F,s),t.Y=!0}}},i}(U),G=/[1-9]/g,q=function(){function t(){this.it=null}return t.prototype._=function(t){this.it=t},t.prototype.h=function(t,i,n){var e=this;if(null!==this.it&&!1!==this.it.Y&&0!==this.it.Vt.length){t.font=i.Nt;var s=Math.round(i.hi.Ot(t,this.it.Vt,G));if(!(s<=0)){t.save();var r=i.si,o=s+2*r,h=o/2,l=this.it.wt,a=this.it.Ft,c=Math.floor(a-h)+.5;c<0?(a+=Math.abs(0-c),c=Math.floor(a-h)+.5):c+o>l&&(a-=Math.abs(l-(c+o)),c=Math.floor(a-h)+.5);var f=c+o,p=0+i.Tt+i.Et+i.Pt+i.Lt;t.fillStyle=this.it.yt;var v=Math.round(c*n),d=Math.round(0*n);t.fillRect(v,d,Math.round(f*n)-v,Math.round(p*n)-d);var y=Math.round(this.it.Ft*n),$=d,g=Math.round(($+i.Tt+i.Dt)*n);t.fillStyle=this.it.ut,t.fillRect(y-Math.floor(.5*n),$,Math.max(1,Math.floor(n)),g-$);var m=p-i.zt-i.Lt;t.textAlign="left",t.fillStyle=this.it.ut,L(t,n,function(){t.fillText(u(e.it).Vt,c+r,m)}),t.restore()}}},t}(),Q=function(){function t(t,i,n){this.Ut=!0,this.lt=new q,this.ot={Y:!1,yt:"#4c525e",ut:"white",Vt:"",wt:0,Ft:NaN},this.A=t,this.ri=i,this.ti=n}return t.prototype.V=function(){this.Ut=!0},t.prototype.W=function(){return this.Ut&&(this.R(),this.Ut=!1),this.lt._(this.ot),this.lt},t.prototype.R=function(){var t=this.ot;t.Y=!1;var i=this.A.I().vertLine;if(i.labelVisible){var n=this.ri.q();if(!n.ii()){var e=n.ei(this.A.U());t.wt=n.wt();var s=this.ti();if(s.P){t.Ft=s.Ft,t.Vt=n.ui(u(e)),t.Y=!0;var r=T(i.labelBackgroundColor);t.yt=r.yt,t.ut=r.kt}}}},t}(),A=function(){function t(){this.ai=null,this.oi=0}return t.prototype.li=function(){return this.oi},t.prototype.fi=function(t){this.oi=t},t.prototype.J=function(){return this.ai},t.prototype.ci=function(t){this.ai=t},t.prototype.vi=function(t,i){return[]},t.prototype._i=function(t){return[]},t.prototype.di=function(){return[]},t.prototype.Y=function(){return!0},t}();(z=R||(R={}))[z.Normal=0]="Normal",z[z.Magnet=1]="Magnet";var N=function(t){function i(i,n){var e,s,r,o,h=t.call(this)||this;h.wi=null,h.Mi=NaN,h.bi=0,h.mi=!0,h.gi=new Map,h.pi=!1,h.yi=NaN,h.ki=NaN,h.xi=NaN,h.Ni=NaN,h.ri=i,h.Si=n,h.Ci=new b(i,h),h.Di=(e=function(){return h.Mi},s=function(){return h.ki},function(t){var i=s(),n=e();if(t===u(h.wi).Ti())return{F:n,Ft:i};var r=u(t.K());return{F:t.Ei(i,r),Ft:i}});var l=(r=function(){return h.bi},o=function(){return h.bt()},function(){return{P:h.ri.q().ei(r()),Ft:o()}});return h.Li=new Q(h,i,l),h.Bi=new x(h),h}return e(i,t),i.prototype.I=function(){return this.Si},i.prototype.Ai=function(t,i){this.xi=t,this.Ni=i},i.prototype.Vi=function(){this.xi=NaN,this.Ni=NaN},i.prototype.Oi=function(){return this.xi},i.prototype.zi=function(){return this.Ni},i.prototype.Pi=function(t,i,n){this.pi||(this.pi=!0),this.mi=!0,this.Fi(t,i,n)},i.prototype.U=function(){return this.bi},i.prototype.bt=function(){return this.yi},i.prototype.gt=function(){return this.ki},i.prototype.Y=function(){return this.mi},i.prototype.Ii=function(){this.mi=!1,this.Wi(),this.Mi=NaN,this.yi=NaN,this.ki=NaN,this.wi=null,this.Vi()},i.prototype._i=function(t){return null!==this.wi?[this.Bi,this.Ci]:[]},i.prototype._t=function(t){return t===this.wi&&this.Si.horzLine.visible},i.prototype.dt=function(){return this.Si.vertLine.visible},i.prototype.vi=function(t,i){this.mi&&this.wi===t||this.gi.clear();var n=[];return this.wi===t&&n.push(this.Ri(this.gi,i,this.Di)),n},i.prototype.di=function(){return this.mi?[this.Li]:[]},i.prototype.vt=function(){return this.wi},i.prototype.ji=function(){this.Bi.V(),this.gi.forEach(function(t){return t.V()}),this.Li.V(),this.Ci.V()},i.prototype.Ui=function(t){return t&&!t.Ti().ii()?t.Ti():null},i.prototype.Fi=function(t,i,n){this.qi(t,i,n)&&this.ji()},i.prototype.qi=function(t,i,n){var e=this.yi,s=this.ki,r=this.Mi,o=this.bi,h=this.wi,u=this.Ui(n);this.bi=t,this.yi=isNaN(t)?NaN:this.ri.q().tt(t),this.wi=n;var l=null!==u?u.K():null;return null!==u&&null!==l?(this.Mi=i,this.ki=u.Z(i,l)):(this.Mi=NaN,this.ki=NaN),e!==this.yi||s!==this.ki||o!==this.bi||r!==this.Mi||h!==this.wi},i.prototype.Wi=function(){var t=this.ri.O().map(function(t){return t.Yi().Hi()}).filter(y),i=0===t.length?null:Math.max.apply(Math,t);this.bi=null!==i?i:NaN},i.prototype.Ri=function(t,i,n){var e=t.get(i);return void 0===e&&(e=new W(this,i,n),t.set(i,e)),e},i}(A);function H(t,i){if(!c(t))return"n/a";if(!f(i)||i<0||i>16)throw TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}var j=function(){function t(t,i){if(i||(i=1),c(t)&&f(t)||(t=100),t<0)throw TypeError("invalid base");this.Qt=t,this.Ki=i,this.$i()}return t.prototype.format=function(t){var i=t<0?"\xe2ˆ’":"";return t=Math.abs(t),i+this.Xi(t)},t.prototype.$i=function(){if(this.Zi=0,this.Qt>0&&this.Ki>0)for(var t=this.Qt;t>1;)t/=10,this.Zi++},t.prototype.Xi=function(t){var i=this.Qt/this.Ki,n=Math.floor(t),e="",s=void 0!==this.Zi?this.Zi:NaN;if(i>1){var r=+(Math.round(t*i)-n*i).toFixed(this.Zi);r>=i&&(r-=i,n+=1),e="."+H(+r.toFixed(this.Zi)*this.Ki,s)}else n=Math.round(n*i)/i,s>0&&(e="."+H(0,s));return n.toFixed(0)+e},t}(),X=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return e(i,t),i.prototype.format=function(i){return t.prototype.format.call(this,i)+"%"},i}(j),J=function(){function t(){this.Ji=[]}return t.prototype.Gi=function(t,i,n){this.Ji.push({Qi:t,tn:i,nn:!0===n})},t.prototype.hn=function(t){var i=this.Ji.findIndex(function(i){return t===i.Qi});i>-1&&this.Ji.splice(i,1)},t.prototype.sn=function(t){this.Ji=this.Ji.filter(function(i){return i.tn===t})},t.prototype.rn=function(t,i){var n=r([],this.Ji);this.Ji=this.Ji.filter(function(t){return!t.nn}),n.forEach(function(n){return n.Qi(t,i)})},t.prototype.en=function(){return this.Ji.length>0},t.prototype.un=function(){this.Ji=[]},t}(),Z=function(){function t(t,i){this.an=t,this.on=i}return t.prototype.ln=function(t){return null!==t&&this.an===t.an&&this.on===t.on},t.prototype.fn=function(){return new t(this.an,this.on)},t.prototype.cn=function(){return this.an},t.prototype.vn=function(){return this.on},t.prototype._n=function(){return this.on-this.an},t.prototype.ii=function(){return this.on===this.an||Number.isNaN(this.on)||Number.isNaN(this.an)},t.prototype.dn=function(i){return null===i?this:new t(Math.min(this.cn(),i.cn()),Math.max(this.vn(),i.vn()))},t.prototype.wn=function(t){if(c(t)&&0!=this.on-this.an){var i=.5*(this.on+this.an),n=this.on-i,e=this.an-i;n*=t,e*=t,this.on=i+n,this.an=i+e}},t.prototype.Mn=function(t){c(t)&&(this.on+=t,this.an+=t)},t.prototype.bn=function(){return{minValue:this.an,maxValue:this.on}},t.mn=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}();function tt(t,i,n){return Math.min(Math.max(t,i),n)}function ti(t,i,n){return i-t<=n}function tn(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function te(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function ts(t){var i=Math.ceil(t);return i%2==0?i-1:i}function tr(t,i){var n=100*(t-i)/i;return i<0?-n:n}function to(t,i){var n=tr(t.cn(),i),e=tr(t.vn(),i);return new Z(n,e)}function th(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function tu(t,i){var n=th(t.cn(),i),e=th(t.vn(),i);return new Z(n,e)}function tl(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=tn(i+1e-4)+4;return t<0?-n:n}function ta(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=Math.pow(10,i-4)-1e-4;return t<0?-n:n}function tc(t){if(null===t)return null;var i=tl(t.cn()),n=tl(t.vn());return new Z(i,n)}var tf,tp=function(){function t(t,i){if(this.gn=t,this.pn=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.gn))this.yn=[2,2.5,2];else{this.yn=[];for(var n=this.gn;1!==n;){if(n%2==0)this.yn.push(2),n/=2;else{if(n%5!=0)throw Error("unexpected base");this.yn.push(2,2.5),n/=5}if(this.yn.length>100)throw Error("something wrong with base")}}}return t.prototype.kn=function(t,i,n){for(var e,s,r,o,h,u,l=0===this.gn?0:1/this.gn,a=1e-9,c=Math.pow(10,Math.max(0,Math.ceil(tn(t-i)))),f=0,p=this.pn[0];;){var v,d,y,$,g,m,w,_,b=(v=c,d=l,y=a,d-v<=y&&c>l+a),S=($=c,g=n*p,m=a,g-$<=m),x=(w=c,_=a,1-w<=_);if(!(b&&S&&x))break;c/=p,p=this.pn[++f%this.pn.length]}if(c<=l+a&&(c=l),c=Math.max(1,c),this.yn.length>0&&Math.abs((o=c)-(h=1))<(u=a))for(f=0,p=this.yn[0];e=c,s=n*p,r=a,s-e<=r&&c>l+a;)c/=p,p=this.yn[++f%this.yn.length];return c},t}(),tv=function(){function t(t,i,n,e){this.xn=[],this.Qt=t,this.gn=i,this.Nn=n,this.Sn=e}return t.prototype.kn=function(t,i){if(t<i)throw Error("high < low");var n=this.Qt.Mt(),e=(t-i)*this.Cn()/n,s=new tp(this.gn,[2,2.5,2]),r=new tp(this.gn,[2,2,2.5]),o=new tp(this.gn,[2.5,2,2]),h=[];return h.push(s.kn(t,i,e),r.kn(t,i,e),o.kn(t,i,e)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(h)},t.prototype.Dn=function(){var t=this.Qt,i=t.K();if(null!==i){var n=t.Mt(),e=this.Nn(n-1,i),s=this.Nn(0,i),r=this.Qt.I().entireTextOnly?this.Tn()/2:0,o=r,h=n-1-r,u=Math.max(e,s),l=Math.min(e,s);if(u!==l){for(var a=this.kn(u,l),c=u%a,f=u>=l?1:-1,p=null,v=0,d=u-(c+=c<0?a:0);d>l;d-=a){var y=this.Sn(d,i,!0);null!==p&&Math.abs(y-p)<this.Cn()||y<o||y>h||(v<this.xn.length?(this.xn[v].En=y,this.xn[v].Ln=t.Bn(d)):this.xn.push({En:y,Ln:t.Bn(d)}),v++,p=y,t.An()&&(a=this.kn(d*f,l)))}this.xn.length=v}else this.xn=[]}else this.xn=[]},t.prototype.Vn=function(){return this.xn},t.prototype.Tn=function(){return this.Qt.Pt()},t.prototype.Cn=function(){return Math.ceil(2.5*this.Tn())},t}();function td(t){return t.slice().sort(function(t,i){return u(t.li())-u(i.li())})}(ty=tf||(tf={}))[ty.Normal=0]="Normal",ty[ty.Logarithmic=1]="Logarithmic",ty[ty.Percentage=2]="Percentage",ty[ty.IndexedTo100=3]="IndexedTo100";var ty,t$,tg=new X,tm=new j(100,1),tw=function(){function t(t,i,n,e){this.On=0,this.zn=null,this.Pn=null,this.Fn=null,this.In={Wn:!1,Rn:null},this.jn=0,this.Un=0,this.qn=new J,this.Hn=new J,this.Yn=[],this.Kn=null,this.$n=null,this.Xn=null,this.Zn=null,this.Jn=tm,this.Gn=t,this.Si=i,this.Qn=n,this.th=e,this.ih=new tv(this,100,this.nh.bind(this),this.hh.bind(this))}return t.prototype.sh=function(){return this.Gn},t.prototype.I=function(){return this.Si},t.prototype.rh=function(t){if(a(this.Si,t),this.eh(),void 0!==t.mode&&this.uh({ah:t.mode}),void 0!==t.scaleMargins){var i=h(t.scaleMargins.top),n=h(t.scaleMargins.bottom);if(i<0||i>1)throw Error("Invalid top margin - expect value between 0 and 1, given="+i);if(n<0||n>1||i+n>1)throw Error("Invalid bottom margin - expect value between 0 and 1, given="+n);if(i+n>1)throw Error("Invalid margins - sum of margins must be less than 1, given="+(i+n));this.oh(),this.$n=null}},t.prototype.lh=function(){return this.Si.autoScale},t.prototype.An=function(){return 1===this.Si.mode},t.prototype.fh=function(){return 2===this.Si.mode},t.prototype._h=function(){return 3===this.Si.mode},t.prototype.ah=function(){return{dh:this.Si.autoScale,wh:this.Si.invertScale,ah:this.Si.mode}},t.prototype.uh=function(t){var i=this.ah(),n=null;void 0!==t.dh&&(this.Si.autoScale=t.dh),void 0!==t.ah&&(this.Si.mode=t.ah,2!==t.ah&&3!==t.ah||(this.Si.autoScale=!0),this.In.Wn=!1),1===i.ah&&t.ah!==i.ah&&(function(t){if(null===t)return!1;var i=ta(t.cn()),n=ta(t.vn());return isFinite(i)&&isFinite(n)}(this.Pn)?null!==(n=function(t){if(null===t)return null;var i=ta(t.cn()),n=ta(t.vn());return new Z(i,n)}(this.Pn))&&this.Mh(n):this.Si.autoScale=!0),1===t.ah&&t.ah!==i.ah&&null!==(n=tc(this.Pn))&&this.Mh(n);var e=i.ah!==this.Si.mode;e&&(2===i.ah||this.fh())&&this.eh(),e&&(3===i.ah||this._h())&&this.eh(),void 0!==t.wh&&i.wh!==t.wh&&(this.Si.invertScale=t.wh,this.bh()),this.Hn.rn(i,this.ah())},t.prototype.mh=function(){return this.Hn},t.prototype.Pt=function(){return this.Qn.fontSize},t.prototype.Mt=function(){return this.On},t.prototype.gh=function(t){this.On!==t&&(this.On=t,this.oh(),this.$n=null)},t.prototype.ph=function(){if(this.zn)return this.zn;var t=this.Mt()-this.yh()-this.kh();return this.zn=t,t},t.prototype.xh=function(){return this.Nh(),this.Pn},t.prototype.Mh=function(t,i){var n=this.Pn;(i||null===n&&null!==t||null!==n&&!n.ln(t))&&(this.$n=null,this.Pn=t)},t.prototype.ii=function(){return this.Nh(),0===this.On||!this.Pn||this.Pn.ii()},t.prototype.Sh=function(t){return this.wh()?t:this.Mt()-1-t},t.prototype.Z=function(t,i){return this.fh()?t=tr(t,i):this._h()&&(t=th(t,i)),this.hh(t,i)},t.prototype.Ch=function(t,i,n){this.Nh();for(var e=this.kh(),s=u(this.xh()),r=s.cn(),o=s.vn(),h=this.ph()-1,l=this.wh(),a=h/(o-r),c=void 0===n?0:n.from,f=void 0===n?t.length:n.to,p=this.Dh(),v=c;v<f;v++){var d=t[v],y=d.F;if(!isNaN(y)){var $=y;null!==p&&($=p(d.F,i));var g=e+a*($-r),m=l?g:this.On-1-g;d.p=m}}},t.prototype.Th=function(t,i,n){this.Nh();for(var e=this.kh(),s=u(this.xh()),r=s.cn(),o=s.vn(),h=this.ph()-1,l=this.wh(),a=h/(o-r),c=void 0===n?0:n.from,f=void 0===n?t.length:n.to,p=this.Dh(),v=c;v<f;v++){var d=t[v],y=d.open,$=d.high,g=d.low,m=d.close;null!==p&&(y=p(d.open,i),$=p(d.high,i),g=p(d.low,i),m=p(d.close,i));var w=e+a*(y-r),_=l?w:this.On-1-w;d.Eh=_,w=e+a*($-r),_=l?w:this.On-1-w,d.Lh=_,w=e+a*(g-r),_=l?w:this.On-1-w,d.Bh=_,w=e+a*(m-r),_=l?w:this.On-1-w,d.Ah=_}},t.prototype.Ei=function(t,i){var n=this.nh(t,i);return this.Vh(n,i)},t.prototype.Vh=function(t,i){var n,e,s,r,o=t;return this.fh()?o=(n=o,(e=i)<0&&(n=-n),n/100*e+e):this._h()&&(o=(s=o,s-=100,(r=i)<0&&(s=-s),s/100*r+r)),o},t.prototype.j=function(){return this.Yn},t.prototype.Oh=function(){if(this.Kn)return this.Kn;for(var t=[],i=0;i<this.Yn.length;i++){var n=this.Yn[i];null===n.li()&&n.fi(i+1),t.push(n)}return t=td(t),this.Kn=t,this.Kn},t.prototype.zh=function(t){-1===this.Yn.indexOf(t)&&(this.Yn.push(t),this.eh(),this.Ph())},t.prototype.Fh=function(t){var i=this.Yn.indexOf(t);if(-1===i)throw Error("source is not attached to scale");this.Yn.splice(i,1),0===this.Yn.length&&(this.uh({dh:!0}),this.Mh(null)),this.eh(),this.Ph()},t.prototype.K=function(){for(var t=null,i=0,n=this.Yn;i<n.length;i++){var e=n[i].K();null!==e&&(null===t||e.Ih<t.Ih)&&(t=e)}return null===t?null:t.G},t.prototype.wh=function(){return this.Si.invertScale},t.prototype.Vn=function(){return this.$n||(this.ih.Dn(),this.$n=this.ih.Vn(),this.qn.rn()),this.$n},t.prototype.Wh=function(){return this.qn},t.prototype.Rh=function(t){this.fh()||this._h()||null===this.Xn&&null===this.Fn&&(this.ii()||(this.Xn=this.On-t,this.Fn=u(this.xh()).fn()))},t.prototype.jh=function(t){if(!this.fh()&&!this._h()&&null!==this.Xn){this.uh({dh:!1}),(t=this.On-t)<0&&(t=0);var i=(this.Xn+.2*(this.On-1))/(t+.2*(this.On-1)),n=u(this.Fn).fn();i=Math.max(i,.1),n.wn(i),this.Mh(n)}},t.prototype.Uh=function(){this.fh()||this._h()||(this.Xn=null,this.Fn=null)},t.prototype.qh=function(t){this.lh()||null===this.Zn&&null===this.Fn&&(this.ii()||(this.Zn=t,this.Fn=u(this.xh()).fn()))},t.prototype.Hh=function(t){if(!this.lh()&&null!==this.Zn){var i=u(this.xh())._n()/(this.ph()-1),n=t-this.Zn;this.wh()&&(n*=-1);var e=n*i,s=u(this.Fn).fn();s.Mn(e),this.Mh(s,!0),this.$n=null}},t.prototype.Yh=function(){this.lh()||null!==this.Zn&&(this.Zn=null,this.Fn=null)},t.prototype.Kh=function(){return this.Jn||this.eh(),this.Jn},t.prototype.ni=function(t,i){switch(this.Si.mode){case 2:return this.Kh().format(tr(t,i));case 3:return this.Kh().format(th(t,i));default:return this.$h(t)}},t.prototype.Bn=function(t){switch(this.Si.mode){case 2:case 3:return this.Kh().format(t);default:return this.$h(t)}},t.prototype.Xh=function(t){return this.$h(t,u(this.Zh()).Kh())},t.prototype.Jh=function(t,i){return t=tr(t,i),tg.format(t)},t.prototype.Gh=function(){return this.Yn},t.prototype.Qh=function(t){this.In={Rn:t,Wn:!1}},t.prototype.ji=function(){this.Yn.forEach(function(t){return t.ji()})},t.prototype.eh=function(){this.$n=null;var t=this.Zh(),i=100;null!==t&&(i=Math.round(1/t.ts())),this.Jn=tm,this.fh()?(this.Jn=tg,i=100):this._h()?(this.Jn=new j(100,1),i=100):null!==t&&(this.Jn=t.Kh()),this.ih=new tv(this,i,this.nh.bind(this),this.hh.bind(this)),this.ih.Dn()},t.prototype.Ph=function(){this.Kn=null},t.prototype.Zh=function(){return this.Yn[0]||null},t.prototype.yh=function(){return this.wh()?this.Si.scaleMargins.bottom*this.Mt()+this.Un:this.Si.scaleMargins.top*this.Mt()+this.jn},t.prototype.kh=function(){return this.wh()?this.Si.scaleMargins.top*this.Mt()+this.jn:this.Si.scaleMargins.bottom*this.Mt()+this.Un},t.prototype.Nh=function(){this.In.Wn||(this.In.Wn=!0,this.ns())},t.prototype.oh=function(){this.zn=null},t.prototype.hh=function(t,i){if(this.Nh(),this.ii())return 0;t=this.An()&&t?tl(t):t;var n=u(this.xh()),e=this.kh()+(this.ph()-1)*(t-n.cn())/n._n();return this.Sh(e)},t.prototype.nh=function(t,i){if(this.Nh(),this.ii())return 0;var n=this.Sh(t),e=u(this.xh()),s=e.cn()+e._n()*((n-this.kh())/(this.ph()-1));return this.An()?ta(s):s},t.prototype.bh=function(){this.$n=null,this.ih.Dn()},t.prototype.ns=function(){var t=this.In.Rn;if(null!==t){for(var i=null,n=0,e=0,s=0,r=this.Gh();s<r.length;s++){var o=r[s];if(o.Y()){var h=o.K();if(null!==h){var l=o.hs(t.ss(),t.rs()),a=l&&l.xh();if(null!==a){switch(this.Si.mode){case 1:a=tc(a);break;case 2:a=to(a,h.G);break;case 3:a=tu(a,h.G)}if(i=null===i?a:i.dn(u(a)),null!==l){var c=l.es();null!==c&&(e=Math.max(n=Math.max(n,c.above),c.below))}}}}}if(n===this.jn&&e===this.Un||(this.jn=n,this.Un=e,this.$n=null,this.oh()),null!==i){if(i.cn()===i.vn()){var f=this.Zh(),p=5*(null===f||this.fh()||this._h()?1:f.ts());i=new Z(i.cn()-p,i.vn()+p)}this.Mh(i)}else null===this.Pn&&this.Mh(new Z(-.5,.5));this.In.Wn=!0}},t.prototype.Dh=function(){return this.fh()?tr:this._h()?th:this.An()?tl:null},t.prototype.$h=function(t,i){return void 0===this.th.priceFormatter?(void 0===i&&(i=this.Kh()),i.format(t)):this.th.priceFormatter(t)},t}();function t_(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}(tI=t$||(t$={}))[tI.LastBar=0]="LastBar",tI[tI.LastVisible=1]="LastVisible";var tb=function(t){return t.getUTCFullYear()},tS=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.us=t,this.os=i}return t.prototype.ls=function(t){var i,n,e,s,r,o,h,u,l,a,c,f,p;return i=t,n=this.us,e=this.os,n.replace(/yyyy/g,H(tb(s=i),4)).replace(/yy/g,H(tb(r=i)%100,2)).replace(/MMMM/g,(o=i,h=e,new Date(o.getUTCFullYear(),o.getUTCMonth(),1).toLocaleString(h,{month:"long"}))).replace(/MMM/g,(u=i,l=e,new Date(u.getUTCFullYear(),u.getUTCMonth(),1).toLocaleString(l,{month:"short"}))).replace(/MM/g,H((c=a=i).getUTCMonth()+1,2)).replace(/dd/g,H((p=f=i).getUTCDate(),2))},t}(),t8=function(){function t(t){this.fs=t||"%h:%m:%s"}return t.prototype.ls=function(t){return this.fs.replace("%h",H(t.getUTCHours(),2)).replace("%m",H(t.getUTCMinutes(),2)).replace("%s",H(t.getUTCSeconds(),2))},t}(),tx={cs:"yyyy-MM-dd",vs:"%h:%m:%s",_s:" ",ds:"default"},tC=function(){function t(t){void 0===t&&(t={});var i=s(s({},tx),t);this.ws=new tS(i.cs,i.ds),this.Ms=new t8(i.vs),this.bs=i._s}return t.prototype.ls=function(t){return""+this.ws.ls(t)+this.bs+this.Ms.ls(t)},t}(),tP=function(){function t(t,i){void 0===i&&(i=50),this.gs=0,this.ps=1,this.ys=1,this.ks=new Map,this.xs=new Map,this.Ns=t,this.Ss=i}return t.prototype.ls=function(t){var i=void 0===t.Cs?new Date(1e3*t.Ds).getTime():new Date(Date.UTC(t.Cs.year,t.Cs.month-1,t.Cs.day)).getTime(),n=this.ks.get(i);if(void 0!==n)return n.Ts;if(this.gs===this.Ss){var e=this.xs.get(this.ys);this.xs.delete(this.ys),this.ks.delete(h(e)),this.ys++,this.gs--}var s=this.Ns(t);return this.ks.set(i,{Ts:s,Es:this.ps}),this.xs.set(this.ps,i),this.gs++,this.ps++,s},t}(),tM=function(){function t(t,i){o(t<=i,"right should be >= left"),this.Ls=t,this.Bs=i}return t.prototype.ss=function(){return this.Ls},t.prototype.rs=function(){return this.Bs},t.prototype.As=function(){return this.Bs-this.Ls+1},t.prototype.Vs=function(t){return this.Ls<=t&&t<=this.Bs},t.prototype.ln=function(t){return this.Ls===t.ss()&&this.Bs===t.rs()},t}();function tF(t,i){return null===t||null===i?t===i:t.ln(i)}var tI,tk,tT,t0=function(){function t(){this.Os=new Map,this.ks=null}return t.prototype.zs=function(t){var i=this;this.ks=null,this.Os.clear(),t.forEach(function(t,n){var e=i.Os.get(t.Ps);void 0===e&&(e=[],i.Os.set(t.Ps,e)),e.push({Fs:n,P:t.P,Is:t.Ps})})},t.prototype.Ws=function(t,i){var n=Math.ceil(i/t);return null!==this.ks&&this.ks.Rs===n||(this.ks={Vn:this.js(n),Rs:n}),this.ks.Vn},t.prototype.js=function(t){for(var i=[],n=0,e=Array.from(this.Os.keys()).sort(function(t,i){return i-t});n<e.length;n++){var s=e[n];if(this.Os.get(s)){var r=i;i=[];for(var o=r.length,u=0,l=h(this.Os.get(s)),a=l.length,c=1/0,f=-1/0,p=0;p<a;p++){for(var v=l[p],d=v.Fs;u<o;){var y=r[u],$=y.Fs;if(!($<d)){c=$;break}u++,i.push(y),f=$,c=1/0}c-d>=t&&d-f>=t&&(i.push(v),f=d)}for(;u<o;u++)i.push(r[u])}}return i},t}(),tE=function(){function t(t){this.Us=t}return t.prototype.qs=function(){return null===this.Us?null:new tM(Math.floor(this.Us.ss()),Math.ceil(this.Us.rs()))},t.prototype.Hs=function(){return this.Us},t.Ys=function(){return new t(null)},t}();(tT=tk||(tk={}))[tT.Year=0]="Year",tT[tT.Month=1]="Month",tT[tT.DayOfMonth=2]="DayOfMonth",tT[tT.Time=3]="Time",tT[tT.TimeWithSeconds=4]="TimeWithSeconds";var tL=function(){function t(t,i,n){this.Ks=0,this.$s=null,this.Xs=[],this.Zn=null,this.Xn=null,this.Zs=new t0,this.Js=new Map,this.Gs=tE.Ys(),this.Qs=!0,this.tr=new J,this.ir=new J,this.nr=new J,this.hr=null,this.sr=null,this.rr=[],this.Si=i,this.th=n,this.er=i.rightOffset,this.ur=i.barSpacing,this.ri=t,this.ar()}return t.prototype.I=function(){return this.Si},t.prototype.lr=function(t){a(this.th,t),this.cr(),this.ar()},t.prototype.rh=function(t,i){var n;a(this.Si,t),this.Si.fixLeftEdge&&this.vr(),this.Si.fixRightEdge&&this._r(),void 0!==t.barSpacing&&this.ri.dr(t.barSpacing),void 0!==t.rightOffset&&this.ri.wr(t.rightOffset),void 0!==t.minBarSpacing&&this.ri.dr(null!==(n=t.barSpacing)&&void 0!==n?n:this.ur),this.cr(),this.ar(),this.nr.rn()},t.prototype.ei=function(t){var i;return(null===(i=this.Xs[t])||void 0===i?void 0:i.P)||null},t.prototype.Mr=function(t,i){if(this.Xs.length<1)return null;if(t.Ds>this.Xs[this.Xs.length-1].P.Ds)return i?this.Xs.length-1:null;for(var n=0;n<this.Xs.length;++n){if(t.Ds===this.Xs[n].P.Ds)return n;if(t.Ds<this.Xs[n].P.Ds)return i?n:null}return null},t.prototype.ii=function(){return 0===this.Ks||0===this.Xs.length},t.prototype.br=function(){return this.mr(),this.Gs.qs()},t.prototype.gr=function(){return this.mr(),this.Gs.Hs()},t.prototype.pr=function(){var t=this.br();if(null===t)return null;var i={from:t.ss(),to:t.rs()};return this.yr(i)},t.prototype.yr=function(t){var i=Math.round(t.from),n=Math.round(t.to),e=u(this.kr()),s=u(this.Nr());return{from:u(this.ei(Math.max(e,i))),to:u(this.ei(Math.min(s,n)))}},t.prototype.Sr=function(t){return{from:u(this.Mr(t.from,!0)),to:u(this.Mr(t.to,!0))}},t.prototype.Cr=function(){return this.Zs},t.prototype.wt=function(){return this.Ks},t.prototype.Dr=function(t){if(isFinite(t)&&!(t<=0)&&this.Ks!==t){if(this.Si.lockVisibleTimeRangeOnResize&&this.Ks){var i=this.ur*t/this.Ks;this.Tr(i)}if(this.Si.fixLeftEdge){var n=this.br();if(null!==n&&0>=n.ss()){var e=this.Ks-t;this.er-=Math.round(e/this.ur)+1}}this.Ks=t,this.Qs=!0,this.Er(),this.Lr()}},t.prototype.tt=function(t){if(this.ii()||!f(t))return 0;var i=this.Br()+this.er-t;return this.Ks-(i+.5)*this.ur-1},t.prototype.Ar=function(t,i){for(var n=this.Br(),e=void 0===i?0:i.from,s=void 0===i?t.length:i.to,r=e;r<s;r++){var o=t[r].P,h=n+this.er-o,u=this.Ks-(h+.5)*this.ur-1;t[r].g=u}},t.prototype.Vr=function(t){return Math.ceil(this.Or(t))},t.prototype.wr=function(t){this.Qs=!0,this.er=t,this.Lr(),this.ri.zr(),this.ri.Pr()},t.prototype.Fr=function(){return this.ur},t.prototype.dr=function(t){this.Tr(t),this.Lr(),this.ri.zr(),this.ri.Pr()},t.prototype.Ir=function(){return this.er},t.prototype.Vn=function(){if(this.ii())return null;if(null!==this.sr)return this.sr;for(var t=this.ur,i=5*(this.ri.I().layout.fontSize+4),n=Math.round(i/t),e=u(this.br()),s=Math.max(e.ss(),e.ss()-n),r=Math.max(e.rs(),e.rs()-n),o=0,h=0,l=this.Zs.Ws(t,i);h<l.length;h++){var a=l[h];if(s<=a.Fs&&a.Fs<=r){var c=this.ei(a.Fs);if(null!==c){if(o<this.rr.length){var f=this.rr[o];f.En=this.tt(a.Fs),f.Ln=this.Wr(c,a.Is),f.Is=a.Is}else this.rr.push({En:this.tt(a.Fs),Ln:this.Wr(c,a.Is),Is:a.Is});o++}}}return this.rr.length=o,this.sr=this.rr,this.rr},t.prototype.Rr=function(){this.Qs=!0,this.dr(this.Si.barSpacing),this.wr(this.Si.rightOffset)},t.prototype.jr=function(t){this.Qs=!0,this.$s=t,this.Lr(),this.vr()},t.prototype.Ur=function(t,i){var n=this.Or(t),e=this.Fr();this.dr(e+i*(e/10)),this.Si.rightBarStaysOnScroll||this.wr(this.Ir()+(n-this.Or(t)))},t.prototype.Rh=function(t){this.Zn&&this.Yh(),null===this.Xn&&null===this.hr&&(this.ii()||(this.Xn=t,this.qr()))},t.prototype.jh=function(t){if(null!==this.hr){var i=tt(this.Ks-t,0,this.Ks),n=tt(this.Ks-u(this.Xn),0,this.Ks);0!==i&&0!==n&&this.dr(this.hr.Fr*i/n)}},t.prototype.Uh=function(){null!==this.Xn&&(this.Xn=null,this.Hr())},t.prototype.qh=function(t){null===this.Zn&&null===this.hr&&(this.ii()||(this.Zn=t,this.qr()))},t.prototype.Hh=function(t){if(null!==this.Zn){var i=(this.Zn-t)/this.Fr();this.er=u(this.hr).Ir+i,this.Qs=!0,this.Lr()}},t.prototype.Yh=function(){null!==this.Zn&&(this.Zn=null,this.Hr())},t.prototype.Yr=function(){this.Kr(this.Si.rightOffset)},t.prototype.Kr=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw RangeError("animationDuration (optional) must be finite positive number");var e=this.er,s=Date.now(),r=function(){var o=(Date.now()-s)/i,h=o>=1;n.wr(h?t:e+(t-e)*o),h||setTimeout(r,20)};r()},t.prototype.V=function(t){this.Qs=!0,this.Xs=t,this.Zs.zs(t),this.Lr()},t.prototype.$r=function(){return this.tr},t.prototype.Xr=function(){return this.ir},t.prototype.Zr=function(){return this.nr},t.prototype.Br=function(){return this.$s||0},t.prototype.Jr=function(t){var i=t.As();this.Tr(this.Ks/i),this.er=t.rs()-this.Br(),this.Lr(),this.Qs=!0,this.ri.zr(),this.ri.Pr()},t.prototype.Gr=function(){var t=this.kr(),i=this.Nr();null!==t&&null!==i&&this.Jr(new tM(t,i+this.Si.rightOffset))},t.prototype.Qr=function(t){var i=new tM(t.from,t.to);this.Jr(i)},t.prototype.ui=function(t){return void 0!==this.th.timeFormatter?this.th.timeFormatter(t.Cs||t.Ds):this.te.ls(new Date(1e3*t.Ds))},t.prototype.kr=function(){return 0===this.Xs.length?null:0},t.prototype.Nr=function(){return 0===this.Xs.length?null:this.Xs.length-1},t.prototype.ie=function(t){return(this.Ks-1-t)/this.ur},t.prototype.Or=function(t){var i=this.ie(t);return Math.round(1e6*(this.Br()+this.er-i))/1e6},t.prototype.Tr=function(t){var i=this.ur;this.ur=t,this.Er(),i!==this.ur&&(this.Qs=!0,this.ne())},t.prototype.mr=function(){if(this.Qs){if(this.Qs=!1,this.ii())this.he(tE.Ys());else{var t=this.Br(),i=this.Ks/this.ur,n=this.er+t,e=new tM(n-i+1,n);this.he(new tE(e))}}},t.prototype.Er=function(){var t=this.se();if(this.ur<t&&(this.ur=t,this.Qs=!0),0!==this.Ks){var i=.5*this.Ks;this.ur>i&&(this.ur=i,this.Qs=!0)}},t.prototype.se=function(){return this.Si.fixLeftEdge&&this.Si.fixRightEdge?this.Ks/this.Xs.length:this.Si.minBarSpacing},t.prototype.Lr=function(){var t=this.re();this.er>t&&(this.er=t,this.Qs=!0);var i=this.ee();null!==i&&this.er<i&&(this.er=i,this.Qs=!0)},t.prototype.ee=function(){var t=this.kr(),i=this.$s;return null===t||null===i?null:t-i-1+(this.Si.fixLeftEdge?this.Ks/this.ur:Math.min(2,this.Xs.length))},t.prototype.re=function(){return this.Si.fixRightEdge?0:this.Ks/this.ur-Math.min(2,this.Xs.length)},t.prototype.qr=function(){this.hr={Fr:this.Fr(),Ir:this.Ir()}},t.prototype.Hr=function(){this.hr=null},t.prototype.Wr=function(t,i){var n=this,e=this.Js.get(i);return void 0===e&&(e=new tP(function(t){return n.ue(t,i)}),this.Js.set(i,e)),e.ls(t)},t.prototype.ue=function(t,i){var n,e,s=this.Si.timeVisible;return e=i<20&&s?this.Si.secondsVisible?4:3:i<40&&s?3:i<50||i<60?2:i<70?1:0,void 0!==this.Si.tickMarkFormatter?this.Si.tickMarkFormatter(null!==(n=t.Cs)&&void 0!==n?n:t.Ds,e,this.th.locale):function(t,i,n){var e={};switch(i){case 0:e.year="numeric";break;case 1:e.month="short";break;case 2:e.day="numeric";break;case 3:e.hour12=!1,e.hour="2-digit",e.minute="2-digit";break;case 4:e.hour12=!1,e.hour="2-digit",e.minute="2-digit",e.second="2-digit"}var s=new Date(void 0===t.Cs?1e3*t.Ds:Date.UTC(t.Cs.year,t.Cs.month-1,t.Cs.day));return new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()).toLocaleString(n,e)}(t,e,this.th.locale)},t.prototype.he=function(t){var i=this.Gs;this.Gs=t,tF(i.qs(),this.Gs.qs())||this.tr.rn(),tF(i.Hs(),this.Gs.Hs())||this.ir.rn(),this.ne()},t.prototype.ne=function(){this.sr=null},t.prototype.cr=function(){this.ne(),this.Js.clear()},t.prototype.ar=function(){var t=this.th.dateFormat;this.Si.timeVisible?this.te=new tC({cs:t,vs:this.Si.secondsVisible?"%h:%m:%s":"%h:%m",_s:"   ",ds:this.th.locale}):this.te=new tS(t,this.th.locale)},t.prototype.vr=function(){if(this.Si.fixLeftEdge){var t=this.kr();if(null!==t){var i=u(this.br()).ss()-t;if(i<0){var n=this.er-i-1;this.wr(n)}this.Er()}}},t.prototype._r=function(){this.Lr(),this.Er()},t}();function tD(t){return!c(t)&&!p(t)}function tV(t){return c(t)}var tY="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function tO(t,i,n){return void 0!==n?n+=" ":n="",void 0===i&&(i=tY),""+n+t+"px "+i}var tK=function(){function t(t){this.ae={Tt:1,Dt:4,Pt:NaN,Nt:"",oe:"",ut:"",Lt:0,Bt:0,At:0,Et:0,zt:0},this.B=t}return t.prototype.I=function(){var t=this.ae,i=this.le(),n=this.fe();return t.Pt===i&&t.oe===n||(t.Pt=i,t.oe=n,t.Nt=tO(i,n),t.Et=Math.floor(i/3.5),t.Lt=t.Et,t.Bt=Math.max(Math.ceil(i/2-t.Dt/2),0),t.At=Math.ceil(i/2+t.Dt/2),t.zt=Math.round(i/10)),t.ut=this.ce(),this.ae},t.prototype.ce=function(){return this.B.I().layout.textColor},t.prototype.le=function(){return this.B.I().layout.fontSize},t.prototype.fe=function(){return this.B.I().layout.fontFamily},t}();function tR(t){return"left"===t||"right"===t}var tz=function(){function t(t){this.ve=new Map,this._e=!1,this.de=[],this.we=t}return t.prototype.Me=function(t,i){var n,e,s=(n=this.ve.get(t),e=i,void 0===n?e:{be:Math.max(n.be,e.be),dh:n.dh||e.dh});this.ve.set(t,s)},t.prototype.me=function(){return this.we},t.prototype.ge=function(t){var i=this.ve.get(t);return void 0===i?{be:this.we}:{be:Math.max(this.we,i.be),dh:i.dh}},t.prototype.pe=function(){this.de=[{ye:0}]},t.prototype.ke=function(t){this.de=[{ye:1,G:t}]},t.prototype.xe=function(){this.de=[{ye:4}]},t.prototype.dr=function(t){this.de.push({ye:2,G:t})},t.prototype.wr=function(t){this.de.push({ye:3,G:t})},t.prototype.Ne=function(){return this.de},t.prototype.dn=function(t){var i=this;this._e=this._e||t._e,this.de=this.de.concat(t.de);for(var n=0,e=t.de;n<e.length;n++){var s=e[n];this.Se(s)}this.we=Math.max(this.we,t.we),t.ve.forEach(function(t,n){i.Me(n,t)})},t.prototype.Se=function(t){switch(t.ye){case 0:this.pe();break;case 1:this.ke(t.G);break;case 2:this.dr(t.G);break;case 3:this.wr(t.G);break;case 4:this.xe()}},t}(),tB=function(){function t(t){this.Ce=t}return t.prototype.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.De(t):t<999995?i+this.De(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.De(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.De(t/1e9)+"B")},t.prototype.De=function(t){var i=Math.pow(10,this.Ce);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Ce).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,function(t,i){return i})},t}();function tU(t,i,n,e){if(0!==i.length){var s=i[e.from].g,r=i[e.from].p;t.moveTo(s,r);for(var o=e.from+1;o<e.to;++o){var h=i[o];if(1===n){var u=i[o-1].p,l=h.g;t.lineTo(l,u)}t.lineTo(h.g,h.p)}}}var tW=function(i){function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.v=null,t}return e(n,i),n.prototype._=function(t){this.v=t},n.prototype.u=function(i){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(i.lineCap="butt",i.lineJoin="round",i.strokeStyle=this.v.S,i.lineWidth=this.v.et,t(i,this.v.at),i.lineWidth=1,i.beginPath(),1===this.v.m.length){var n=this.v.m[0],e=this.v.Te/2;i.moveTo(n.g-e,this.v.Ee),i.lineTo(n.g-e,n.p),i.lineTo(n.g+e,n.p),i.lineTo(n.g+e,this.v.Ee)}else i.moveTo(this.v.m[this.v.M.from].g,this.v.Ee),i.lineTo(this.v.m[this.v.M.from].g,this.v.m[this.v.M.from].p),tU(i,this.v.m,this.v.Le,this.v.M),this.v.M.to>this.v.M.from&&(i.lineTo(this.v.m[this.v.M.to-1].g,this.v.Ee),i.lineTo(this.v.m[this.v.M.from].g,this.v.Ee));i.closePath();var s=i.createLinearGradient(0,0,0,this.v.Ee);s.addColorStop(0,this.v.Be),s.addColorStop(1,this.v.Ae),i.fillStyle=s,i.fill()}},n}(m),tG=function(i){function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.v=null,t}return e(n,i),n.prototype._=function(t){this.v=t},n.prototype.u=function(i){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(i.lineCap="butt",i.lineWidth=this.v.et,t(i,this.v.at),i.strokeStyle=this.v.S,i.lineJoin="round",i.beginPath(),1===this.v.m.length){var n=this.v.m[0];i.moveTo(n.g-this.v.Te/2,n.p),i.lineTo(n.g+this.v.Te/2,n.p)}else tU(i,this.v.m,this.v.Le,this.v.M);i.stroke()}},n}(m);function tq(t,i,n,e,s){void 0===e&&(e=0),void 0===s&&(s=t.length);for(var r=s-e;0<r;){var o=r>>1,h=e+o;n(t[h],i)?(e=h+1,r-=o+1):r=o}return e}function tQ(t,i,n,e,s){void 0===e&&(e=0),void 0===s&&(s=t.length);for(var r=s-e;0<r;){var o=r>>1,h=e+o;n(i,t[h])?r=o:(e=h+1,r-=o+1)}return e}function tA(t,i){return t.P<i}function t1(t,i){return t<i.P}function tN(t,i,n){var e=i.ss(),s=i.rs(),r=tq(t,e,tA),o=tQ(t,s,t1);if(!n)return{from:r,to:o};var h=r,u=o;return r>0&&r<t.length&&t[r].P>=e&&(h=r-1),o>0&&o<t.length&&t[o-1].P<=s&&(u=o+1),{from:h,to:u}}var t3=function(){function t(t,i,n){this.Ve=!0,this.Oe=!0,this.ze=!0,this.Pe=[],this.Fe=null,this.Ie=t,this.We=i,this.Re=n}return t.prototype.V=function(t){this.Ve=!0,"data"===t&&(this.Oe=!0),"options"===t&&(this.ze=!0)},t.prototype.je=function(){this.Oe&&(this.Ue(),this.Oe=!1),this.Ve&&(this.qe(),this.Ve=!1),this.ze&&(this.He(),this.ze=!1)},t.prototype.Ye=function(){this.Fe=null},t.prototype.qe=function(){var t=this.Ie.J(),i=this.We.q();if(this.Ye(),!i.ii()&&!t.ii()){var n=i.br();if(null!==n&&0!==this.Ie.Yi().Ke()){var e=this.Ie.K();null!==e&&(this.Fe=tN(this.Pe,n,this.Re),this.$e(t,i,e.G))}}},t}(),tH=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return e(i,t),i.prototype.$e=function(t,i,n){i.Ar(this.Pe,$(this.Fe)),t.Ch(this.Pe,n,$(this.Fe))},i.prototype.Xe=function(t,i){return{P:t,F:i,g:NaN,p:NaN}},i.prototype.He=function(){},i.prototype.Ue=function(){var t=this,i=this.Ie.Ze();this.Pe=this.Ie.Yi().Je().map(function(n){var e=n.G[3];return t.Ge(n.Fs,e,i)})},i}(t3),tj=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.lt=new g,e.Qe=new tW,e.tu=new tG,e.lt.i([e.Qe,e.tu]),e}return e(i,t),i.prototype.W=function(t,i){if(!this.Ie.Y())return null;var n=this.Ie.I();this.je();var e={Le:n.lineType,m:this.Pe,S:n.lineColor,at:n.lineStyle,et:n.lineWidth,Be:n.topColor,Ae:n.bottomColor,Ee:t,M:this.Fe,Te:this.We.q().Fr()};return this.Qe._(e),this.tu._(e),this.lt},i.prototype.Ge=function(t,i){return this.Xe(t,i)},i}(tH),tX=function(){function t(){this.it=null,this.iu=0,this.nu=0}return t.prototype._=function(t){this.it=t},t.prototype.h=function(t,i,n,e){if(null!==this.it&&0!==this.it.Yi.length&&null!==this.it.M){this.iu=this.hu(i),this.iu>=2&&Math.max(1,Math.floor(i))%2!=this.iu%2&&this.iu--,this.nu=this.it.su?Math.min(this.iu,Math.floor(i)):this.iu;for(var s=null,r=this.nu<=this.iu&&this.it.Fr>=Math.floor(1.5*i),o=this.it.M.from;o<this.it.M.to;++o){var h=this.it.Yi[o];s!==h.ut&&(t.fillStyle=h.ut,s=h.ut);var u=Math.floor(.5*this.nu),l=Math.round(h.g*i),a=l-u,c=this.nu,f=a+c-1,p=Math.min(h.Lh,h.Bh),v=Math.max(h.Lh,h.Bh),d=Math.round(p*i)-u,y=Math.max(Math.round(v*i)+u-d,this.nu);t.fillRect(a,d,c,y);var $=Math.ceil(1.5*this.iu);if(r){if(this.it.ru){var g=l-$,m=Math.max(d,Math.round(h.Eh*i)-u),w=m+c-1;w>d+y-1&&(m=(w=d+y-1)-c+1),t.fillRect(g,m,a-g,w-m+1)}var _=l+$,b=Math.max(d,Math.round(h.Ah*i)-u),S=b+c-1;S>d+y-1&&(b=(S=d+y-1)-c+1),t.fillRect(f+1,b,_-f,S-b+1)}}}},t.prototype.hu=function(t){var i,n;return Math.max(Math.floor(t),Math.floor(Math.floor(.3*(i=u(this.it).Fr)*(n=t))))},t}(),tJ=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return e(i,t),i.prototype.$e=function(t,i,n){i.Ar(this.Pe,$(this.Fe)),t.Th(this.Pe,n,$(this.Fe))},i.prototype.eu=function(t,i,n){return{P:t,open:i.G[0],high:i.G[1],low:i.G[2],close:i.G[3],g:NaN,Eh:NaN,Lh:NaN,Bh:NaN,Ah:NaN}},i.prototype.Ue=function(){var t=this,i=this.Ie.Ze();this.Pe=this.Ie.Yi().Je().map(function(n){return t.Ge(n.Fs,n,i)})},i}(t3),t9=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.lt=new tX,i}return e(i,t),i.prototype.W=function(t,i){if(!this.Ie.Y())return null;var n=this.Ie.I();this.je();var e={Yi:this.Pe,Fr:this.We.q().Fr(),ru:n.openVisible,su:n.thinBars,M:this.Fe};return this.lt._(e),this.lt},i.prototype.He=function(){var t=this;this.Pe.forEach(function(i){i.ut=t.Ie.Ze().au(i.P).uu})},i.prototype.Ge=function(t,i,n){return s(s({},this.eu(t,i,n)),{ut:n.au(t).uu})},i}(tJ),tZ=function(){function t(){this.it=null,this.iu=0}return t.prototype._=function(t){this.it=t},t.prototype.h=function(t,i,n,e){if(null!==this.it&&0!==this.it.Yi.length&&null!==this.it.M){this.iu=(s=this.it.Fr,r=i,s>=2.5&&s<=4?Math.floor(3*r):Math.max(Math.floor(r),Math.min(Math.floor(s*(1-.2*Math.atan(Math.max(4,s)-4)/(.5*Math.PI))*r),Math.floor(s*r)))),this.iu>=2&&Math.floor(i)%2!=this.iu%2&&this.iu--;var s,r,o=this.it.Yi;this.it.ou&&this.lu(t,o,this.it.M,i),this.it.fu&&this.cu(t,o,this.it.M,this.it.Fr,i);var h=this.vu(i);(!this.it.fu||this.iu>2*h)&&this._u(t,o,this.it.M,i)}},t.prototype.lu=function(t,i,n,e){if(null!==this.it){var s="",r=Math.min(Math.floor(e),Math.floor(this.it.Fr*e));r=Math.max(Math.floor(e),Math.min(r,this.iu));for(var o=Math.floor(.5*r),h=null,u=n.from;u<n.to;u++){var l=i[u];l.du!==s&&(t.fillStyle=l.du,s=l.du);var a=Math.round(Math.min(l.Eh,l.Ah)*e),c=Math.round(Math.max(l.Eh,l.Ah)*e),f=Math.round(l.Lh*e),p=Math.round(l.Bh*e),v=Math.round(e*l.g)-o,d=v+r-1;null!==h&&(v=Math.min(v=Math.max(h+1,v),d));var y=d-v+1;t.fillRect(v,f,y,a-f),t.fillRect(v,c+1,y,p-c),h=d}}},t.prototype.vu=function(t){var i=Math.floor(1*t);this.iu<=2*i&&(i=Math.floor(.5*(this.iu-1)));var n=Math.max(Math.floor(t),i);return this.iu<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},t.prototype.cu=function(t,i,n,e,s){if(null!==this.it)for(var r="",o=this.vu(s),h=null,u=n.from;u<n.to;u++){var l=i[u];l.X!==r&&(t.fillStyle=l.X,r=l.X);var a=Math.round(l.g*s)-Math.floor(.5*this.iu),c=a+this.iu-1,f=Math.round(Math.min(l.Eh,l.Ah)*s),p=Math.round(Math.max(l.Eh,l.Ah)*s);if(null!==h&&(a=Math.min(a=Math.max(h+1,a),c)),this.it.Fr*s>2*o)E(t,a,f,c-a+1,p-f+1,o);else{var v=c-a+1;t.fillRect(a,f,v,p-f+1)}h=c}},t.prototype._u=function(t,i,n,e){if(null!==this.it)for(var s="",r=this.vu(e),o=n.from;o<n.to;o++){var h=i[o],u=Math.round(Math.min(h.Eh,h.Ah)*e),l=Math.round(Math.max(h.Eh,h.Ah)*e),a=Math.round(h.g*e)-Math.floor(.5*this.iu),c=a+this.iu-1;if(h.ut!==s){var f=h.ut;t.fillStyle=f,s=f}this.it.fu&&(a+=r,u+=r,c-=r,l-=r),u>l||t.fillRect(a,u,c-a+1,l-u+1)}},t}(),t4=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.lt=new tZ,i}return e(i,t),i.prototype.W=function(t,i){if(!this.Ie.Y())return null;var n=this.Ie.I();this.je();var e={Yi:this.Pe,Fr:this.We.q().Fr(),ou:n.wickVisible,fu:n.borderVisible,M:this.Fe};return this.lt._(e),this.lt},i.prototype.He=function(){var t=this;this.Pe.forEach(function(i){var n=t.Ie.Ze().au(i.P);i.ut=n.uu,i.du=n.wu,i.X=n.Mu})},i.prototype.Ge=function(t,i,n){var e=n.au(t);return s(s({},this.eu(t,i,n)),{ut:e.uu,du:e.wu,X:e.Mu})},i}(tJ),t6=function(){function t(){this.it=null,this.bu=[]}return t.prototype._=function(t){this.it=t,this.bu=[]},t.prototype.h=function(t,i,n,e){if(null!==this.it&&0!==this.it.m.length&&null!==this.it.M){this.bu.length||this.mu(i);for(var s=Math.max(1,Math.floor(i)),r=Math.round(this.it.gu*i)-Math.floor(s/2),o=r+s,h=this.it.M.from;h<this.it.M.to;h++){var u=this.it.m[h],l=this.bu[h-this.it.M.from],a=Math.round(u.p*i);t.fillStyle=u.ut;var c=void 0,f=void 0;a<=r?(c=a,f=o):(c=r,f=a-Math.floor(s/2)+s),t.fillRect(l.ss,c,l.rs-l.ss+1,f-c)}}},t.prototype.mu=function(t){if(null!==this.it&&0!==this.it.m.length&&null!==this.it.M){var i=1>=Math.ceil(this.it.Fr*t)?0:Math.max(1,Math.floor(t)),n=Math.round(this.it.Fr*t)-i;this.bu=Array(this.it.M.to-this.it.M.from);for(var e=this.it.M.from;e<this.it.M.to;e++){var s,r=this.it.m[e],o=Math.round(r.g*t),h=void 0,u=void 0;n%2?(h=o-(s=(n-1)/2),u=o+s):(h=o-(s=n/2),u=o+s-1),this.bu[e-this.it.M.from]={ss:h,rs:u,pu:o,yu:r.g*t,P:r.P}}for(e=this.it.M.from+1;e<this.it.M.to;e++){var l=this.bu[e-this.it.M.from],a=this.bu[e-this.it.M.from-1];l.P===a.P+1&&l.ss-a.rs!==i+1&&(a.pu>a.yu?a.rs=l.ss-i-1:l.ss=a.rs+i+1)}var c=Math.ceil(this.it.Fr*t);for(e=this.it.M.from;e<this.it.M.to;e++){(l=this.bu[e-this.it.M.from]).rs<l.ss&&(l.rs=l.ss);var f=l.rs-l.ss+1;c=Math.min(f,c)}if(i>0&&c<4)for(e=this.it.M.from;e<this.it.M.to;e++)(f=(l=this.bu[e-this.it.M.from]).rs-l.ss+1)>c&&(l.pu>l.yu?l.rs-=1:l.ss+=1)}else this.bu=[]},t}();function t7(t){return{m:[],Fr:t,gu:NaN,M:null}}function t2(t,i,n){return{P:t,F:i,g:NaN,p:NaN,ut:n}}var t5=function(t){function i(i,n){var e=t.call(this,i,n,!1)||this;return e.C=new g,e.ku=t7(0),e.lt=new t6,e}return e(i,t),i.prototype.W=function(t,i){return this.Ie.Y()?(this.je(),this.C):null},i.prototype.Ue=function(){var t=this.We.q().Fr();this.ku=t7(t);for(var i=0,n=0,e=this.Ie.I().color,s=0,r=this.Ie.Yi().Je();s<r.length;s++){var o=r[s],h=o.G[3],u=void 0!==o.ut?o.ut:e,l=t2(o.Fs,h,u);++i<this.ku.m.length?this.ku.m[i]=l:this.ku.m.push(l),this.Pe[n++]={P:o.Fs,g:0}}this.lt._(this.ku),this.C.i([this.lt])},i.prototype.He=function(){},i.prototype.Ye=function(){t.prototype.Ye.call(this),this.ku.M=null},i.prototype.$e=function(t,i,n){if(null!==this.Fe){var e=i.Fr(),s=u(i.br()),r=t.Z(this.Ie.I().base,n);i.Ar(this.ku.m),t.Ch(this.ku.m,n),this.ku.gu=r,this.ku.M=tN(this.ku.m,s,!1),this.ku.Fr=e,this.lt._(this.ku)}},i}(t3),it=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.tu=new tG,e}return e(i,t),i.prototype.W=function(t,i){if(!this.Ie.Y())return null;var n=this.Ie.I();this.je();var e={m:this.Pe,S:n.color,at:n.lineStyle,Le:n.lineType,et:n.lineWidth,M:this.Fe,Te:this.We.q().Fr()};return this.tu._(e),this.tu},i.prototype.Ge=function(t,i){return this.Xe(t,i)},i}(tH),ii=/[2-9]/g,ie=function(){function t(t){void 0===t&&(t=50),this.ks=new Map,this.xu=0,this.Nu=Array.from(Array(t))}return t.prototype.Su=function(){this.ks.clear(),this.Nu.fill(void 0)},t.prototype.Ot=function(t,i,n){var e=String(i).replace(n||ii,"0"),s=this.ks.get(e);if(void 0===s){if(0===(s=t.measureText(e).width)&&0!==i.length)return 0;var r=this.Nu[this.xu];void 0!==r&&this.ks.delete(r),this.Nu[this.xu]=e,this.xu=(this.xu+1)%this.Nu.length,this.ks.set(e,s)}return s},t}(),is=function(){function t(t){this.Cu=null,this.ae=null,this.Du="right",this.Ks=0,this.Tu=t}return t.prototype.Eu=function(t,i,n,e){this.Cu=t,this.ae=i,this.Ks=n,this.Du=e},t.prototype.h=function(t,i){null!==this.ae&&null!==this.Cu&&this.Cu.h(t,this.ae,this.Tu,this.Ks,this.Du,i)},t}(),ir=function(){function t(t,i,n){this.Lu=t,this.Tu=new ie(50),this.Bu=i,this.B=n,this.le=-1,this.lt=new is(this.Tu)}return t.prototype.W=function(t,i){var n=this.B.Au(this.Bu);if(null===n)return null;var e=n.Vu(this.Bu)?n.Ti():this.Bu.J();if(null===e)return null;var s=n.Ou(e);if("overlay"===s)return null;var r=this.B.zu();return r.Pt!==this.le&&(this.le=r.Pt,this.Tu.Su()),this.lt.Eu(this.Lu.Jt(),r,i,s),this.lt},t}(),io=function(){function n(){this.it=null}return n.prototype._=function(t){this.it=t},n.prototype.h=function(n,e,s,r){if(null!==this.it&&!1!==this.it.Y){var o=Math.round(this.it.p*e);if(!(o<0||o>Math.ceil(this.it.Mt*e))){var h=Math.ceil(this.it.wt*e);n.lineCap="butt",n.strokeStyle=this.it.ut,n.lineWidth=Math.floor(this.it.et*e),t(n,this.it.at),i(n,o,0,h)}}},n}(),ih=function(){function t(t){this.Pu={wt:0,Mt:0,p:0,ut:"rgba(0, 0, 0, 0)",et:1,at:0,Y:!1},this.Fu=new io,this.Ut=!0,this.Ie=t,this.We=t.ct(),this.Fu._(this.Pu)}return t.prototype.V=function(){this.Ut=!0},t.prototype.W=function(t,i){return this.Ie.Y()?(this.Ut&&(this.Iu(t,i),this.Ut=!1),this.Fu):null},t}(),iu=function(t){function i(i){return t.call(this,i)||this}return e(i,t),i.prototype.Iu=function(t,i){this.Pu.Y=!1;var n=this.Ie.J(),e=n.ah().ah;if(2===e||3===e){var s=this.Ie.I();if(s.baseLineVisible&&this.Ie.Y()){var r=this.Ie.K();null!==r&&(this.Pu.Y=!0,this.Pu.p=n.Z(r.G,r.G),this.Pu.wt=i,this.Pu.Mt=t,this.Pu.ut=s.baseLineColor,this.Pu.et=s.baseLineWidth,this.Pu.at=s.baseLineStyle)}}},i}(ih);function il(t,i){return ts(Math.min(Math.max(t,12),30)*i)}function ia(t,i){switch(t){case"arrowDown":case"arrowUp":case"circle":return il(i,1);case"diamond":case"diamondSQ":case"doubleDiamond":return il(i,.8);case"square":return il(i,.7)}}function ic(t){return te(il(t,1))}function ip(t){return Math.max(il(t,.1),3)}function iv(t,i,n,e,s){var r=ia("square",n),o=(r-1)/2,h=t-o,u=i-o;return e>=h&&e<=h+r&&s>=u&&s<=u+r}function id(t,i,n,e,s){var r=(ia("arrowUp",s)-1)/2,o=(ts(s/2)-1)/2;i.beginPath(),t?(i.moveTo(n-r,e),i.lineTo(n,e-r),i.lineTo(n+r,e),i.lineTo(n+o,e),i.lineTo(n+o,e+r),i.lineTo(n-o,e+r),i.lineTo(n-o,e)):(i.moveTo(n-r,e),i.lineTo(n,e+r),i.lineTo(n+r,e),i.lineTo(n+o,e),i.lineTo(n+o,e-r),i.lineTo(n-o,e-r),i.lineTo(n-o,e)),i.fill()}function iy(t,i,n,e,s,r){return iv(i,n,e,s,r)}var i$=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.it=null,i.Tu=new ie,i.le=-1,i.fe="",i.Wu="",i}return e(i,t),i.prototype._=function(t){this.it=t},i.prototype.Eu=function(t,i){this.le===t&&this.fe===i||(this.le=t,this.fe=i,this.Wu=tO(t,i),this.Tu.Su())},i.prototype.Ru=function(t,i){if(null===this.it||null===this.it.M)return null;for(var n=this.it.M.from;n<this.it.M.to;n++){var e=this.it.m[n];if(im(e,t,i))return{ju:e.Uu,qu:e.qu}}return null},i.prototype.u=function(t,i,n){if(null!==this.it&&null!==this.it.M){t.textBaseline="middle",t.font=this.Wu;for(var e=this.it.M.from;e<this.it.M.to;e++){var s=this.it.m[e];void 0!==s.Vt&&(s.Vt.wt=this.Tu.Ot(t,s.Vt.Hu),s.Vt.Mt=this.le),ig(s,t)}}},i}(m);function ig(t,i){i.fillStyle=t.ut,void 0!==t.Vt&&function(t,i,n,e){t.fillText(i,n,e)}(i,t.Vt.Hu,t.g-t.Vt.wt/2,t.Vt.p),function(t,i){if(0!==t.Ke){var n,e,s,r,o,h,u,l,a,c,f,p,v,d,y;switch(t.Yu){case"arrowDown":return void id(!1,i,t.g,t.p,t.Ke);case"arrowUp":return void id(!0,i,t.g,t.p,t.Ke);case"circle":return void(n=i,e=t.g,s=t.p,o=(ia("circle",r=t.Ke)-1)/2,void(n.beginPath(),n.arc(e,s,o,0,2*Math.PI,!1),n.fill()));case"diamond":return void(h=i,u=t.g,l=t.p,a=t.Ke,l+=20,c=(ia("diamond",a)-1)/1,void(h.beginPath(),h.moveTo(u,l-c),h.lineTo(u+c,l),h.lineTo(u,l+c),h.lineTo(u-c,l),h.closePath(),h.fill()));case"diamondSQ":return void(f=i,p=t.g,v=t.p,d=t.Ke,v+=20,y=(ia("diamondSQ",d)-1)/1,void(f.beginPath(),f.moveTo(p,v-y),f.lineTo(p+y,v),f.lineTo(p,v+y),f.lineTo(p-y,v),f.closePath(),f.fill(),y=(ia("diamondSQ",d)-1)/2,f.beginPath(),f.moveTo(p-y,v-y),f.lineTo(p+y,v+y),f.moveTo(p+y,v-y),f.lineTo(p-y,v+y),f.strokeStyle="#131722",f.stroke()));case"doubleDiamond":return void(f=i,p=t.g,v=t.p,d=t.Ke,v+=20,y=(ia("doubleDiamond",d)-1)/1,void(f.beginPath(),f.moveTo(p,v-y),f.lineTo(p+y,v),f.lineTo(p,v+y),f.lineTo(p-y,v),f.closePath(),f.fill(),y=(ia("doubleDiamond",d)-1)/2,f.beginPath(),f.moveTo(p-y,v-y),f.lineTo(p+y,v+y),f.moveTo(p+y,v-y),f.lineTo(p-y,v+y),f.lineWidth=1.5,f.strokeStyle="cyan",f.stroke()));case"square":return void function(t,i,n,e){var s=ia("square",e),r=(s-1)/2;t.fillRect(i-r,n-r,s,s)}(i,t.g,t.p,t.Ke)}t.Yu}}(t,i)}function im(t,i,n){var e,s,r,o,h,u,l;return!(void 0===t.Vt||(e=t.g,s=t.Vt.p,r=t.Vt.wt,o=t.Vt.Mt,h=i,u=n,l=o/2,!(h>=e)||!(h<=e+r)||!(u>=s-l)||!(u<=s+l)))||function(t,i,n){if(0===t.Ke)return!1;switch(t.Yu){case"arrowDown":case"arrowUp":var e,s,r,o,h,u,l,a,c,f,p,v,d,y,$,g,m,w,_,b,S,x,C,P,M,F,I,k,T;return M=t.g,F=t.p,iv(M,F,I=t.Ke,k=i,T=n);case"circle":return e=t.g,s=t.p,r=t.Ke,o=i,h=n,u=2+ia("circle",r)/2,Math.sqrt((l=e-o)*l+(a=s-h)*a)<=u;case"diamond":return c=t.g,f=t.p,p=t.Ke,v=i,d=n,y=2+ia("diamond",p)/2,Math.sqrt(($=c-v)*$+(g=f-d)*g)<=y;case"diamondSQ":return m=t.g,w=t.p,_=t.Ke,b=i,S=n,x=2+ia("diamondSQ",_)/2,Math.sqrt((C=m-b)*C+(P=w-S)*P)<=x;case"doubleDiamond":return m=t.g,w=t.p,_=t.Ke,b=i,S=n,x=2+ia("doubleDiamond",_)/2,Math.sqrt((C=m-b)*C+(P=w-S)*P)<=x;case"square":return iv(t.g,t.p,t.Ke,i,n)}t.Yu}(t,i,n)}function iw(t,i,n,e,s,r,o,h,u){var l=c(n)?n:n.close,a=c(n)?n:n.high,f=c(n)?n:n.low,p=c(i.size)?Math.max(i.size,0):1,v=ic(h.Fr())*p,d=v/2;switch(t.Ke=v,i.position){case"inBar":return t.p=o.Z(l,u),void(void 0!==t.Vt&&(t.Vt.p=t.p+d+r+.6*s));case"aboveBar":return t.p=o.Z(a,u)-d-e.Ku,void 0!==t.Vt&&(t.Vt.p=t.p-d-.6*s,e.Ku+=1.2*s),void(e.Ku+=v+r);case"belowBar":return t.p=o.Z(f,u)+d+e.$u,void 0!==t.Vt&&(t.Vt.p=t.p+d+r+.6*s,e.$u+=1.2*s),void(e.$u+=v+r)}i.position}var i_=function(){function t(t,i){this.Ut=!0,this.Xu=!0,this.Zu=!0,this.Ju=null,this.lt=new i$,this.Gu=t,this.ri=i,this.it={m:[],M:null}}return t.prototype.V=function(t){this.Ut=!0,this.Zu=!0,"data"===t&&(this.Xu=!0)},t.prototype.W=function(t,i,n,e){if(!this.Gu.Y())return null;this.Ut&&this.je();var s=this.ri.I().layout;return this.lt.Eu(s.fontSize,s.fontFamily),this.lt._(this.it),this.lt},t.prototype.Qu=function(){if(this.Zu){if(this.Gu.ta().length>0){var t=this.ri.q().Fr(),i=ip(t),n=1.5*ic(t)+2*i;this.Ju={above:n,below:n}}else this.Ju=null;this.Zu=!1}return this.Ju},t.prototype.je=function(){var t=this.Gu.J(),i=this.ri.q(),n=this.Gu.ta();this.Xu&&(this.it.m=n.map(function(t){return{P:t.time,g:0,p:0,Ke:0,Yu:t.shape,ut:t.color,Uu:t.Uu,qu:t.id,Vt:void 0}}),this.Xu=!1);var e=this.ri.I().layout;this.it.M=null;var s=i.br();if(null!==s){var r=this.Gu.K();if(null!==r&&0!==this.it.m.length){var o=NaN,h=ip(i.Fr()),u={Ku:h,$u:h};this.it.M=tN(this.it.m,s,!0);for(var l=this.it.M.from;l<this.it.M.to;l++){var a=n[l];a.time!==o&&(u.Ku=h,u.$u=h,o=a.time);var c=this.it.m[l];c.g=i.tt(a.time),void 0!==a.text&&a.text.length>0&&(c.Vt={Hu:a.text,p:0,wt:0,Mt:0});var f=this.Gu.ia(a.time);null!==f&&iw(c,a,f,u,e.fontSize,h,t,i,r.G)}this.Ut=!1}}},t}(),ib=function(t){function i(i){return t.call(this,i)||this}return e(i,t),i.prototype.Iu=function(t,i){var n=this.Pu;n.Y=!1;var e=this.Ie.I();if(e.priceLineVisible&&this.Ie.Y()){var s=this.Ie.na(0===e.priceLineSource);s.ha||(n.Y=!0,n.p=s.Ft,n.ut=this.Ie.sa(s.ut),n.wt=i,n.Mt=t,n.et=e.priceLineWidth,n.at=e.priceLineStyle)}},i}(ih),iS=function(t){function i(i){var n=t.call(this)||this;return n.ft=i,n}return e(i,t),i.prototype.Gt=function(t,i,n){if(t.Y=!1,i.Y=!1,this.ft.Y()){var e=this.ft.I(),s=e.lastValueVisible,r=""!==this.ft.ra(),o=0===e.seriesLastValueMode,h=this.ft.na(!1);if(!h.ha){s&&(t.Vt=this.ea(h,s,o),t.Y=0!==t.Vt.length),(r||o)&&(i.Vt=this.ua(h,s,r,o),i.Y=i.Vt.length>0);var u=this.ft.sa(h.ut),l=T(u);n.yt=l.yt,n.ut=l.kt,n.Ft=h.Ft,i.X=this.ft.ct().I().layout.backgroundColor,t.X=u}}},i.prototype.ua=function(t,i,n,e){var s="",r=this.ft.ra();return n&&0!==r.length&&(s+=r+" "),i&&e&&(s+=this.ft.J().fh()?t.aa:t.oa),s.trim()},i.prototype.ea=function(t,i,n){return i?n?this.ft.J().fh()?t.oa:t.aa:t.Vt:""},i}(U),i8=function(){function t(t,i){this.Pn=t,this.la=i||null}return t.prototype.xh=function(){return this.Pn},t.prototype.es=function(){return this.la},t.prototype.bn=function(){return null===this.Pn?null:{priceRange:this.Pn.bn(),margins:this.la||void 0}},t.mn=function(i){return null===i?null:new t(Z.mn(i.priceRange),i.margins)},t}(),ix=function(t){function i(i,n){var e=t.call(this,i)||this;return e.fa=n,e}return e(i,t),i.prototype.Iu=function(t,i){var n=this.Pu;if(n.Y=!1,this.Ie.Y()){var e=this.fa.ca();if(null!==e){var s=this.fa.I();n.Y=!0,n.p=e,n.ut=s.color,n.wt=i,n.Mt=t,n.et=s.lineWidth,n.at=s.lineStyle}}},i}(ih),iC=function(t){function i(i,n){var e=t.call(this)||this;return e.Gu=i,e.fa=n,e}return e(i,t),i.prototype.Gt=function(t,i,n){t.Y=!1,i.Y=!1;var e=this.fa.I(),s=e.axisLabelVisible,r=""!==e.title;if(s&&this.Gu.Y()){var o=this.fa.ca();if(null!==o){r&&(i.Vt=e.title,i.Y=!0),i.X=this.Gu.ct().I().layout.backgroundColor,t.Vt=this.Gu.J().Xh(e.price),t.Y=!0;var h=T(e.color);n.yt=h.yt,n.ut=h.kt,n.Ft=o}}},i}(U),iP=function(){function t(t,i){this.Gu=t,this.Si=i,this.va=new ix(t,this),this.Lu=new iC(t,this),this._a=new ir(this.Lu,t,t.ct())}return t.prototype.rh=function(t){a(this.Si,t),this.V(),this.Gu.ct().Pr()},t.prototype.I=function(){return this.Si},t.prototype._i=function(){return[this.va,this._a]},t.prototype.da=function(){return this.Lu},t.prototype.V=function(){this.va.V(),this.Lu.V()},t.prototype.ca=function(){var t=this.Gu,i=t.J();if(t.ct().q().ii()||i.ii())return null;var n=t.K();return null===n?null:i.Z(this.Si.price,n.G)},t}(),iM=function(t){function i(i){var n=t.call(this)||this;return n.ri=i,n}return e(i,t),i.prototype.ct=function(){return this.ri},i}(A),iF={uu:"",Mu:"",wu:""},iI=function(){function t(t){this.Gu=t}return t.prototype.au=function(t,i){var n=this.Gu.wa(),e=this.Gu.I();switch(n){case"Line":return this.Ma(e);case"Area":return this.ba(e);case"Bar":return this.ma(e,t,i);case"Candlestick":return this.ga(e,t,i);case"Histogram":return this.pa(e,t,i)}throw Error("Unknown chart style")},t.prototype.ma=function(t,i,n){var e=s({},iF),r=t.upColor,o=t.downColor,h=u(this.ya(i,n)),a=l(h.G[0])<=l(h.G[3]);return e.uu=a?r:o,e.Mu=a?r:o,e},t.prototype.ga=function(t,i,n){var e=s({},iF),r=t.upColor,o=t.downColor,h=t.borderUpColor,a=t.borderDownColor,c=t.wickUpColor,f=t.wickDownColor,p=u(this.ya(i,n)),v=l(p.G[0])<=l(p.G[3]);return e.uu=v?r:o,e.Mu=v?h:a,e.wu=v?c:f,e},t.prototype.ba=function(t){return s(s({},iF),{uu:t.lineColor})},t.prototype.Ma=function(t){return s(s({},iF),{uu:t.color})},t.prototype.pa=function(t,i,n){var e=s({},iF),r=u(this.ya(i,n));return e.uu=void 0!==r.ut?r.ut:t.color,e},t.prototype.ya=function(t,i){return void 0!==i?i.G:this.Gu.Yi().ka(t)},t}(),ik=function(){function t(){this.xa=[],this.Na=new Map,this.Sa=new Map}return t.prototype.Ca=function(){this.xa=[],this.Na.clear(),this.Sa.clear()},t.prototype.Da=function(){return this.Ke()>0?this.xa[this.xa.length-1]:null},t.prototype.Ta=function(){return this.Ke()>0?this.Ea(0):null},t.prototype.Hi=function(){return this.Ke()>0?this.Ea(this.xa.length-1):null},t.prototype.Ke=function(){return this.xa.length},t.prototype.ii=function(){return 0===this.Ke()},t.prototype.Vs=function(t){return null!==this.La(t,0)},t.prototype.ka=function(t){return this.Ba(t)},t.prototype.Ba=function(t,i){void 0===i&&(i=0);var n=this.La(t,i);return null===n?null:s(s({},this.Aa(n)),{Fs:this.Ea(n)})},t.prototype.Je=function(){return this.xa},t.prototype.Va=function(t,i,n){if(this.ii())return null;for(var e=null,s=0,r=n;s<r.length;s++){var o=r[s];e=iT(e,this.Oa(t,i,o))}return e},t.prototype.dn=function(t){0!==t.length&&(this.ii()||t[t.length-1].Fs<this.xa[0].Fs?this.za(t):t[0].Fs>this.xa[this.xa.length-1].Fs?this.Pa(t):1!==t.length||t[0].Fs!==this.xa[this.xa.length-1].Fs?this.Fa(t):this.Ia(t[0]))},t.prototype.Ea=function(t){return this.xa[t].Fs},t.prototype.Aa=function(t){return this.xa[t]},t.prototype.La=function(t,i){var n=this.Wa(t);if(null===n&&0!==i)switch(i){case -1:return this.Ra(t);case 1:return this.ja(t);default:throw TypeError("Unknown search mode")}return n},t.prototype.Ra=function(t){var i=this.Ua(t);return i>0&&(i-=1),i!==this.xa.length&&this.Ea(i)<t?i:null},t.prototype.ja=function(t){var i=this.qa(t);return i!==this.xa.length&&t<this.Ea(i)?i:null},t.prototype.Wa=function(t){var i=this.Ua(t);return i===this.xa.length||t<this.xa[i].Fs?null:i},t.prototype.Ua=function(t){return tq(this.xa,t,function(t,i){return t.Fs<i})},t.prototype.qa=function(t){return tQ(this.xa,t,function(t,i){return i.Fs>t})},t.prototype.Ha=function(t,i,n){for(var e=null,s=t;s<i;s++){var r=this.xa[s].G[n];Number.isNaN(r)||(null===e?e={Ya:r,Ka:r}:(r<e.Ya&&(e.Ya=r),r>e.Ka&&(e.Ka=r)))}return e},t.prototype.$a=function(t){var i=Math.floor(t.Fs/30);this.Na.forEach(function(t){return t.delete(i)})},t.prototype.za=function(t){o(0!==t.length,"plotRows should not be empty"),this.Sa.clear(),this.Na.clear(),this.xa=t.concat(this.xa)},t.prototype.Pa=function(t){o(0!==t.length,"plotRows should not be empty"),this.Sa.clear(),this.Na.clear(),this.xa=this.xa.concat(t)},t.prototype.Ia=function(t){o(!this.ii(),"plot list should not be empty"),o(this.xa[this.xa.length-1].Fs===t.Fs,"last row index should match new row index"),this.$a(t),this.Sa.delete(t.Fs),this.xa[this.xa.length-1]=t},t.prototype.Fa=function(t){o(0!==t.length,"plot rows should not be empty"),this.Sa.clear(),this.Na.clear(),this.xa=function(t,i){for(var n=function(t,i){for(var n=t.length,e=i.length,s=n+e,r=0,o=0;r<n&&o<e;)t[r].Fs<i[o].Fs?r++:t[r].Fs>i[o].Fs?o++:(r++,o++,s--);return s}(t,i),e=Array(n),s=0,r=0,o=t.length,h=i.length,u=0;s<o&&r<h;)t[s].Fs<i[r].Fs?(e[u]=t[s],s++):t[s].Fs>i[r].Fs?(e[u]=i[r],r++):(e[u]=i[r],s++,r++),u++;for(;s<o;)e[u]=t[s],s++,u++;for(;r<h;)e[u]=i[r],r++,u++;return e}(this.xa,t)},t.prototype.Oa=function(t,i,n){if(this.ii())return null;var e=null,s=u(this.Ta()),r=u(this.Hi()),o=Math.max(t,s),h=Math.min(i,r),l=30*Math.ceil(o/30),a=Math.max(l,30*Math.floor(h/30)),c=this.Ua(o),f=this.qa(Math.min(h,l,i));e=iT(e,this.Ha(c,f,n));var p=this.Na.get(n);void 0===p&&(p=new Map,this.Na.set(n,p));for(var v=Math.max(l+1,o);v<a;v+=30){var d=Math.floor(v/30),y=p.get(d);if(void 0===y){var $=this.Ua(30*d),g=this.qa((d+1)*30-1);y=this.Ha($,g,n),p.set(d,y)}e=iT(e,y)}return c=this.Ua(a),f=this.qa(h),iT(e,this.Ha(c,f,n))},t}();function iT(t,i){return null===t?i:null===i?t:{Ya:Math.min(t.Ya,i.Ya),Ka:Math.max(t.Ka,i.Ka)}}var i0=function(t){function i(i,n,e){var s=t.call(this,i)||this;s.it=new ik,s.va=new ib(s),s.Xa=[],s.Za=new iu(s),s.Ja=null,s.Ga=[],s.Qa=[],s.Si=n,s.io=e;var r=new iS(s);return s.gi=[r],s._a=new ir(r,s,i),s.no(),s.ho(),s}return e(i,t),i.prototype.un=function(){},i.prototype.sa=function(t){return this.Si.priceLineColor||t},i.prototype.na=function(t,i){var n={ha:!0},e=this.J();if(this.ct().q().ii()||e.ii()||this.it.ii())return n;var s,r,o=this.ct().q().br(),h=this.K();if(null===o||null===h)return n;if(t){var u=this.it.Da();if(null===u)return n;s=u,r=u.Fs}else{var l=this.it.Ba(o.rs(),-1);if(null===l||null===(s=this.it.ka(l.Fs)))return n;r=l.Fs}var a=s.G[3],c=this.Ze().au(r,{G:s}),f=e.Z(a,h.G);return{ha:!1,F:i?a:void 0,Vt:e.ni(a,h.G),aa:e.Xh(a),oa:e.Jh(a,h.G),ut:c.uu,Ft:f,Fs:r}},i.prototype.Ze=function(){return null!==this.Ja||(this.Ja=new iI(this)),this.Ja},i.prototype.I=function(){return this.Si},i.prototype.rh=function(t){var i,n=t.priceScaleId;void 0!==n&&n!==this.Si.priceScaleId&&this.ct().so(this,n);var e=null!==(i=this.Si.pane)&&void 0!==i?i:0;a(this.Si,t),null!==this.ai&&void 0!==t.scaleMargins&&this.ai.rh({scaleMargins:t.scaleMargins}),void 0!==t.priceFormat&&this.no(),t.pane&&e!==t.pane&&this.ct().ro(this,e,t.pane),this.ct().eo(this),this.ct().uo(),this.Bi.V("options")},i.prototype.ao=function(){this.it.Ca(),this.ho()},i.prototype.oo=function(t,i){i&&this.it.Ca(),this.it.dn(t),this.lo(),this.Bi.V("data"),this.Ci.V("data");var n=this.ct().Au(this);this.ct().fo(n),this.ct().eo(this),this.ct().uo(),this.ct().Pr()},i.prototype.co=function(t){this.Ga=t.map(function(t){return s({},t)}),this.lo();var i=this.ct().Au(this);this.Ci.V("data"),this.ct().fo(i),this.ct().eo(this),this.ct().uo(),this.ct().Pr()},i.prototype.ta=function(){return this.Qa},i.prototype.vo=function(t){var i=new iP(this,t);return this.Xa.push(i),this.ct().eo(this),i},i.prototype._o=function(t){var i=this.Xa.indexOf(t);-1!==i&&this.Xa.splice(i,1),this.ct().eo(this)},i.prototype.wa=function(){return this.io},i.prototype.K=function(){var t=this.do();return null===t?null:{G:t.G[3],Ih:t.P}},i.prototype.do=function(){var t=this.ct().q().br();if(null===t)return null;var i=t.ss();return this.it.Ba(i,1)},i.prototype.Yi=function(){return this.it},i.prototype.ia=function(t){var i=this.it.ka(t);return null===i?null:"Bar"===this.io||"Candlestick"===this.io?{open:i.G[0],high:i.G[1],low:i.G[2],close:i.G[3]}:i.G[3]},i.prototype._i=function(){var t=[];this.wo()||t.push(this.Za);for(var i=0,n=this.Xa;i<n.length;i++){var e=n[i];t.push.apply(t,e._i())}return t.push(this.Bi,this.va,this._a,this.Ci),t},i.prototype.vi=function(t,i){if(i!==this.ai&&!this.wo())return[];for(var n=r([],this.gi),e=0,s=this.Xa;e<s.length;e++){var o=s[e];n.push(o.da())}return n},i.prototype.hs=function(t,i){var n=this;if(void 0!==this.Si.autoscaleInfoProvider){var e=this.Si.autoscaleInfoProvider(function(){var e=n.Mo(t,i);return null===e?null:e.bn()});return i8.mn(e)}return this.Mo(t,i)},i.prototype.ts=function(){return this.Si.priceFormat.minMove},i.prototype.Kh=function(){return this.Jn},i.prototype.ji=function(){this.Bi.V(),this.Ci.V();for(var t=0,i=this.gi;t<i.length;t++)i[t].V();for(var n=0,e=this.Xa;n<e.length;n++)e[n].V();this.va.V(),this.Za.V()},i.prototype.J=function(){return u(this.ai)},i.prototype.H=function(t){if(!(("Line"===this.io||"Area"===this.io)&&this.Si.crosshairMarkerVisible))return null;var i=this.it.ka(t);return null===i?null:{F:i.G[3],N:this.bo(),X:this.mo(),$:this.po(t)}},i.prototype.ra=function(){return this.Si.title},i.prototype.Y=function(){return this.Si.visible},i.prototype.wo=function(){return!tR(this.J().sh())},i.prototype.Mo=function(t,i){if(!f(t)||!f(i)||this.it.ii())return null;var n="Line"===this.io||"Area"===this.io||"Histogram"===this.io?[3]:[2,1],e=this.it.Va(t,i,n),s=null!==e?new Z(e.Ya,e.Ka):null;if("Histogram"===this.wa()){var r=this.Si.base,o=new Z(r,r);s=null!==s?s.dn(o):o}return new i8(s,this.Ci.Qu())},i.prototype.bo=function(){switch(this.io){case"Line":case"Area":return this.Si.crosshairMarkerRadius}return 0},i.prototype.mo=function(){switch(this.io){case"Line":case"Area":var t=this.Si.crosshairMarkerBorderColor;if(0!==t.length)return t}return this.ct().I().layout.backgroundColor},i.prototype.po=function(t){switch(this.io){case"Line":case"Area":var i=this.Si.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.Ze().au(t).uu},i.prototype.no=function(){switch(this.Si.priceFormat.type){case"custom":this.Jn={format:this.Si.priceFormat.formatter};break;case"volume":this.Jn=new tB(this.Si.priceFormat.precision);break;case"percent":this.Jn=new X(this.Si.priceFormat.precision);break;default:var t=Math.pow(10,this.Si.priceFormat.precision);this.Jn=new j(t,this.Si.priceFormat.minMove*t)}null!==this.ai&&this.ai.eh()},i.prototype.lo=function(){var t=this,i=this.ct().q();if(i.ii()||0===this.it.Ke())this.Qa=[];else{var n=u(this.it.Ta());this.Qa=this.Ga.map(function(e,s){var r=u(i.Mr(e.time,!0));return{time:u(t.it.Ba(r,r<n?1:-1)).Fs,position:e.position,shape:e.shape,color:e.color,id:e.id,Uu:s,text:e.text,size:e.size}})}},i.prototype.ho=function(){switch(this.Ci=new i_(this,this.ct()),this.io){case"Bar":this.Bi=new t9(this,this.ct());break;case"Candlestick":this.Bi=new t4(this,this.ct());break;case"Line":this.Bi=new it(this,this.ct());break;case"Area":this.Bi=new tj(this,this.ct());break;case"Histogram":this.Bi=new t5(this,this.ct());break;default:throw Error("Unknown chart style assigned: "+this.io)}},i}(iM),iE=function(){function t(t){this.Si=t}return t.prototype.yo=function(t,i,n){var e=t;if(0===this.Si.mode)return e;var s=n.Ti(),r=s.K();if(null===r)return e;var o=s.Z(t,r),h=n.j().filter(function(t){return t instanceof i0}).reduce(function(t,e){if(n.Vu(e)||!e.Y())return t;var s=e.J(),r=e.Yi();if(s.ii()||!r.Vs(i))return t;var o=r.ka(i);if(null===o)return t;var h=l(e.K());return t.concat([s.Z(o.G[3],h.G)])},[]);if(0===h.length)return e;h.sort(function(t,i){return Math.abs(t-o)-Math.abs(i-o)});var u=h[0];return s.Ei(u,r)},t}(),iL=function(){function i(){this.it=null}return i.prototype._=function(t){this.it=t},i.prototype.h=function(i,n,e,s){var r=this;if(null!==this.it){var o=Math.max(1,Math.floor(n));i.lineWidth=o;var h,l,a=Math.ceil(this.it.rt*n),c=Math.ceil(this.it.st*n);h=i,l=function(){var e=u(r.it);if(e.ko){i.strokeStyle=e.xo,t(i,e.No),i.beginPath();for(var s=0,h=e.So;s<h.length;s++){var l=Math.round(h[s].En*n);i.moveTo(l,-o),i.lineTo(l,a+o)}i.stroke()}if(e.Co){i.strokeStyle=e.Do,t(i,e.To),i.beginPath();for(var f=0,p=e.Eo;f<p.length;f++){var v=Math.round(p[f].En*n);i.moveTo(-o,v),i.lineTo(c+o,v)}i.stroke()}},h.save(),h.lineWidth%2&&h.translate(.5,.5),l(),h.restore()}},i}(),iD=function(){function t(t){this.lt=new iL,this.Ut=!0,this.wi=t}return t.prototype.V=function(){this.Ut=!0},t.prototype.W=function(t,i){if(this.Ut){var n=this.wi.ct().I().grid,e={rt:t,st:i,Co:n.horzLines.visible,ko:n.vertLines.visible,Do:n.horzLines.color,xo:n.vertLines.color,To:n.horzLines.style,No:n.vertLines.style,Eo:this.wi.Ti().Vn(),So:this.wi.ct().q().Vn()||[]};this.lt._(e),this.Ut=!1}return this.lt},t}(),iV=function(){function t(t){this.Bi=new iD(t)}return t.prototype.Lo=function(){return this.Bi},t}(),iY=function(){function t(t,i){this.Yn=[],this.Bo=new Map,this.On=0,this.Ks=0,this.Ao=1e3,this.Kn=null,this.Vo=new J,this.Oo=t,this.ri=i,this.zo=new iV(this);var n=i.I();this.Po=this.Fo("left",n.leftPriceScale),this.Io=this.Fo("right",n.rightPriceScale),this.Po.mh().Gi(this.Wo.bind(this,this.Po),this),this.Io.mh().Gi(this.Wo.bind(this,this.Po),this),this.Ro(n)}return t.prototype.Ro=function(t){if(t.leftPriceScale&&this.Po.rh(t.leftPriceScale),t.rightPriceScale&&this.Io.rh(t.rightPriceScale),t.localization&&(this.Po.eh(),this.Io.eh()),t.overlayPriceScales)for(var i=0,n=Array.from(this.Bo.values());i<n.length;i++){var e=u(n[i][0].J());e.rh(t.overlayPriceScales),t.localization&&e.eh()}},t.prototype.jo=function(t){switch(t){case"left":return this.Po;case"right":return this.Io}return this.Bo.has(t)?h(this.Bo.get(t))[0].J():null},t.prototype.un=function(){this.ct().Uo().sn(this),this.Po.mh().sn(this),this.Io.mh().sn(this),this.Yn.forEach(function(t){t.un&&t.un()}),this.Vo.rn()},t.prototype.qo=function(){return this.Ao},t.prototype.Ho=function(t){this.Ao=t},t.prototype.ct=function(){return this.ri},t.prototype.wt=function(){return this.Ks},t.prototype.Mt=function(){return this.On},t.prototype.Dr=function(t){this.Ks=t,this.Yo()},t.prototype.gh=function(t){var i=this;this.On=t,this.Po.gh(t),this.Io.gh(t),this.Yn.forEach(function(n){if(i.Vu(n)){var e=n.J();null!==e&&e.gh(t)}}),this.Yo()},t.prototype.j=function(){return this.Yn},t.prototype.Vu=function(t){var i=t.J();return null===i||this.Po!==i&&this.Io!==i},t.prototype.zh=function(t,i,n){var e=void 0!==n?n:this.$o().Ko+1;this.Xo(t,i,e)},t.prototype.Fh=function(t){var i=this.Yn.indexOf(t);o(-1!==i,"removeDataSource: invalid data source"),this.Yn.splice(i,1);var n=u(t.J()).sh();if(this.Bo.has(n)){var e=h(this.Bo.get(n)),s=e.indexOf(t);-1!==s&&(e.splice(s,1),0===e.length&&this.Bo.delete(n))}var r=t.J();r&&r.j().indexOf(t)>=0&&r.Fh(t),null!==r&&(r.Ph(),this.Zo(r)),this.Kn=null},t.prototype.Ou=function(t){return t===this.Po?"left":t===this.Io?"right":"overlay"},t.prototype.Jo=function(){return this.Po},t.prototype.Go=function(){return this.Io},t.prototype.Qo=function(t,i){t.Rh(i)},t.prototype.tl=function(t,i){t.jh(i),this.Yo()},t.prototype.il=function(t){t.Uh()},t.prototype.nl=function(t,i){t.qh(i)},t.prototype.hl=function(t,i){t.Hh(i),this.Yo()},t.prototype.sl=function(t){t.Yh()},t.prototype.Yo=function(){this.Yn.forEach(function(t){t.ji()})},t.prototype.Ti=function(){var t=null;return this.ri.I().rightPriceScale.visible&&0!==this.Io.j().length?t=this.Io:this.ri.I().leftPriceScale.visible&&0!==this.Po.j().length?t=this.Po:0!==this.Yn.length&&(t=this.Yn[0].J()),null===t&&(t=this.Io),t},t.prototype.Zo=function(t){null!==t&&t.lh()&&this.rl(t)},t.prototype.el=function(t){var i=this.Oo.br();t.uh({dh:!0}),null!==i&&t.Qh(i),this.Yo()},t.prototype.ul=function(){this.rl(this.Po),this.rl(this.Io)},t.prototype.al=function(){var t=this;this.Zo(this.Po),this.Zo(this.Io),this.Yn.forEach(function(i){t.Vu(i)&&t.Zo(i.J())}),this.Yo(),this.ri.Pr()},t.prototype.Oh=function(){return null===this.Kn&&(this.Kn=td(this.Yn)),this.Kn},t.prototype.ol=function(){return this.Vo},t.prototype.ll=function(){return this.zo},t.prototype.rl=function(t){var i=t.Gh();if(i&&i.length>0&&!this.Oo.ii()){var n=this.Oo.br();null!==n&&t.Qh(n)}t.ji()},t.prototype.$o=function(){var t=this.Oh();if(0===t.length)return{fl:0,Ko:0};for(var i=0,n=0,e=0;e<t.length;e++){var s=t[e].li();null!==s&&(s<i&&(i=s),s>n&&(n=s))}return{fl:i,Ko:n}},t.prototype.Xo=function(t,i,n){var e=this.jo(i);if(null===e&&(e=this.Fo(i,this.ri.I().overlayPriceScales)),this.Yn.push(t),!tR(i)){var s=this.Bo.get(i)||[];s.push(t),this.Bo.set(i,s)}e.zh(t),t.ci(e),t.fi(n),this.Zo(e),this.Kn=null},t.prototype.Wo=function(t,i,n){i.ah!==n.ah&&this.rl(t)},t.prototype.Fo=function(t,i){var n=s({visible:!0,autoScale:!0},d(i)),e=new tw(t,n,this.ri.I().layout,this.ri.I().localization);return e.gh(this.Mt()),e},t}(),iO=function(t){function i(i){var n=t.call(this)||this;return n.cl=new Map,n.it=i,n}return e(i,t),i.prototype.u=function(t){},i.prototype.l=function(t){if(this.it.Y){t.save();for(var i=0,n=0,e=this.it.vl;n<e.length;n++)if(0!==(u=e[n]).Vt.length){t.font=u.Nt;var s=this._l(t,u.Vt);s>this.it.wt?u.Ur=this.it.wt/s:u.Ur=1,i+=u.dl*u.Ur}var r=0;switch(this.it.wl){case"top":r=0;break;case"center":r=Math.max((this.it.Mt-i)/2,0);break;case"bottom":r=Math.max(this.it.Mt-i,0)}t.fillStyle=this.it.ut;for(var o=0,h=this.it.vl;o<h.length;o++){var u=h[o];t.save();var l=0;switch(this.it.Ml){case"left":t.textAlign="left",l=u.dl/2;break;case"center":t.textAlign="center",l=this.it.wt/2;break;case"right":t.textAlign="right",l=this.it.wt-1-u.dl/2}t.translate(l,r),t.textBaseline="top",t.font=u.Nt,t.scale(u.Ur,u.Ur),t.fillText(u.Vt,0,u.bl),t.restore(),r+=u.dl*u.Ur}t.restore()}},i.prototype._l=function(t,i){var n=this.ml(t.font),e=n.get(i);return void 0===e&&(e=t.measureText(i).width,n.set(i,e)),e},i.prototype.ml=function(t){var i=this.cl.get(t);return void 0===i&&(i=new Map,this.cl.set(t,i)),i},i}(m),iK=function(){function t(t){this.Ut=!0,this.ot={Y:!1,ut:"",Mt:0,wt:0,vl:[],wl:"center",Ml:"center"},this.lt=new iO(this.ot),this.ft=t}return t.prototype.V=function(){this.Ut=!0},t.prototype.W=function(t,i){return this.Ut&&(this.R(t,i),this.Ut=!1),this.lt},t.prototype.R=function(t,i){var n=this.ft.I(),e=this.ot;e.Y=n.visible,e.Y&&(e.ut=n.color,e.wt=i,e.Mt=t,e.Ml=n.horzAlign,e.wl=n.vertAlign,e.vl=[{Vt:n.text,Nt:tO(n.fontSize,n.fontFamily,n.fontStyle),dl:1.2*n.fontSize,bl:0,Ur:0}])},t}(),iR=function(t){function i(i,n){var e=t.call(this)||this;return e.Si=n,e.Bi=new iK(e),e}return e(i,t),i.prototype._i=function(){return[this.Bi]},i.prototype.I=function(){return this.Si},i.prototype.ji=function(){this.Bi.V()},i}(A),iz=function(){function t(t,i){this.gl=[],this.pl=[],this.Ks=0,this.yl=null,this.kl=null,this.xl=new J,this.Nl=new J,this.Sl=!1,this.Cl=t,this.Si=i,this.Dl=new tK(this),this.Oo=new tL(this,i.timeScale,this.Si.localization),this.A=new N(this,i.crosshair),this.Tl=new iE(i.crosshair),this.El=new iR(this,i.watermark),this.Ll(),this.gl[0].Ho(2e3)}return t.prototype.Bl=function(){this.Al(new tz(3))},t.prototype.Pr=function(){this.Al(new tz(2))},t.prototype.eo=function(t){var i=this.Vl(t);this.Al(i)},t.prototype.Ol=function(){return this.kl},t.prototype.zl=function(t){var i=this.kl;this.kl=t,null!==i&&this.eo(i.Pl),null!==t&&this.eo(t.Pl)},t.prototype.I=function(){return this.Si},t.prototype.rh=function(t){a(this.Si,t),this.gl.forEach(function(i){return i.Ro(t)}),void 0!==t.timeScale&&this.Oo.rh(t.timeScale),void 0!==t.localization&&this.Oo.lr(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.xl.rn(),this.Bl()},t.prototype.Fl=function(t,i){var n=this.Il(t);null!==n&&(n.J.rh(i),this.xl.rn())},t.prototype.Il=function(t){for(var i=0,n=this.gl;i<n.length;i++){var e=n[i],s=e.jo(t);if(null!==s)return{vt:e,J:s}}return null},t.prototype.q=function(){return this.Oo},t.prototype.Wl=function(){return this.gl},t.prototype.Rl=function(){return this.El},t.prototype.jl=function(){return this.A},t.prototype.Ul=function(){return this.Nl},t.prototype.ql=function(t,i){t.gh(i),this.zr()},t.prototype.Dr=function(t){this.Ks=t,this.Oo.Dr(this.Ks),this.gl.forEach(function(i){return i.Dr(t)}),this.zr()},t.prototype.Ll=function(t){if(void 0!==t){if(t>this.gl.length)for(var i=this.gl.length;i<t;i++)this.Ll(i);else if(t<this.gl.length)return this.gl[t]}var n=new iY(this.Oo,this);void 0!==t?this.gl.splice(t,0,n):this.gl.push(n);var e=void 0===t?this.gl.length-1:t,s=new tz(3);return s.Me(e,{be:0,dh:!0}),this.Al(s),n},t.prototype.Hl=function(t){var i=this;if(0!==t){if(this.gl[t].Oh().forEach(function(t){t instanceof i0&&i.Yl(t)}),this.Sl=!0,t!==this.gl.length-1)for(var n=function(t){e.gl[t].Oh().forEach(function(i){i instanceof i0&&i.rh({pane:t-1})})},e=this,s=t+1;s<this.gl.length;s++)n(s);this.gl.splice(t,1),this.Sl=!1;var r=new tz(3);this.Al(r)}},t.prototype.Kl=function(t,i){var n=this.gl[t],e=this.gl[i];this.Sl=!0,n.Oh().forEach(function(t){t instanceof i0&&t.rh({pane:i})}),e.Oh().forEach(function(i){i instanceof i0&&i.rh({pane:t})}),this.gl[t]=e,this.gl[i]=n,this.Sl=!1,this.Al(new tz(3))},t.prototype.Qo=function(t,i,n){t.Qo(i,n)},t.prototype.tl=function(t,i,n){t.tl(i,n),this.uo(),this.Al(this.$l(t,2))},t.prototype.il=function(t,i){t.il(i),this.Al(this.$l(t,2))},t.prototype.nl=function(t,i,n){i.lh()||t.nl(i,n)},t.prototype.hl=function(t,i,n){i.lh()||(t.hl(i,n),this.uo(),this.Al(this.$l(t,2)))},t.prototype.sl=function(t,i){i.lh()||(t.sl(i),this.Al(this.$l(t,2)))},t.prototype.el=function(t,i){t.el(i),this.Al(this.$l(t,2))},t.prototype.Xl=function(t){this.Oo.Rh(t)},t.prototype.Zl=function(t,i){var n=this.q();n.ii()||0===i||(t=Math.max(1,Math.min(t,n.wt())),n.Ur(t,i),this.zr())},t.prototype.Jl=function(t){this.Gl(0),this.Ql(t),this.tf()},t.prototype.if=function(t){this.Oo.jh(t),this.zr()},t.prototype.nf=function(){this.Oo.Uh(),this.Pr()},t.prototype.Gl=function(t){this.yl=t,this.Oo.qh(t)},t.prototype.Ql=function(t){var i=!1;return null!==this.yl&&Math.abs(t-this.yl)>20&&(this.yl=null,i=!0),this.Oo.Hh(t),this.zr(),i},t.prototype.tf=function(){this.Oo.Yh(),this.Pr(),this.yl=null},t.prototype.O=function(){return this.pl},t.prototype.hf=function(t,i,n){this.A.Ai(t,i);var e=NaN,s=this.Oo.Vr(t),r=this.Oo.br();null!==r&&(s=Math.min(Math.max(r.ss(),s),r.rs()));var o=n.Ti(),h=o.K();null!==h&&(e=o.Ei(i,h)),e=this.Tl.yo(e,s,n),this.A.Pi(s,e,n),this.sf(),this.Nl.rn(this.A.U(),{x:t,y:i})},t.prototype.rf=function(){this.jl().Ii(),this.sf(),this.Nl.rn(null,null)},t.prototype.uo=function(){var t=this.A.vt();if(null!==t){var i=this.A.Oi(),n=this.A.zi();this.hf(i,n,t)}this.A.ji()},t.prototype.ef=function(t,i){var n=this.Oo.ei(0);void 0!==i&&this.Oo.V(i);var e=this.Oo.ei(0),s=this.Oo.Br(),r=this.Oo.br();if(null!==r&&null!==n&&null!==e){var o=r.Vs(s),h=n.Ds>e.Ds,u=o&&this.Oo.I().shiftVisibleRangeOnNewBar;null===t||!(t>s)||h||u||null===t||this.Oo.wr(this.Oo.Ir()-(t-s))}this.Oo.jr(t)},t.prototype.fo=function(t){null!==t&&t.al()},t.prototype.Au=function(t){var i=this.gl.find(function(i){return i.Oh().includes(t)});return void 0===i?null:i},t.prototype.zr=function(){this.El.ji(),this.gl.forEach(function(t){return t.al()}),this.uo()},t.prototype.un=function(){this.gl.forEach(function(t){return t.un()}),this.gl.length=0,this.Si.localization.priceFormatter=void 0,this.Si.localization.timeFormatter=void 0},t.prototype.uf=function(){return this.Dl},t.prototype.zu=function(){return this.Dl.I()},t.prototype.Uo=function(){return this.xl},t.prototype.af=function(t,i){var n=i.pane||0;this.gl.length-1<=n&&this.Ll(n);var e=this.gl[n],s=this.lf(i,t,e);return this.pl.push(s),1===this.pl.length?this.Bl():this.Pr(),s},t.prototype.Yl=function(t){var i=this.Au(t),n=this.pl.indexOf(t);o(-1!==n,"Series not found"),this.pl.splice(n,1),u(i).Fh(t),t.un&&t.un()},t.prototype.so=function(t,i){var n=u(this.Au(t));n.Fh(t);var e=this.Il(i);if(null===e){var s=t.li();n.zh(t,i,s)}else s=e.vt===n?t.li():void 0,e.vt.zh(t,i,s)},t.prototype.Gr=function(){var t=new tz(2);t.pe(),this.Al(t)},t.prototype.ff=function(t){var i=new tz(2);i.ke(t),this.Al(i)},t.prototype.xe=function(){var t=new tz(2);t.xe(),this.Al(t)},t.prototype.dr=function(t){var i=new tz(2);i.dr(t),this.Al(i)},t.prototype.wr=function(t){var i=new tz(2);i.wr(t),this.Al(i)},t.prototype.cf=function(){return this.Si.rightPriceScale.visible?"right":"left"},t.prototype.ro=function(t,i,n){if(n!==i&&!this.Sl){t.I().pane!==n&&t.rh({pane:n});var e=this.Au(t);null==e||e.Fh(t);var s=this.Ll(n);this.vf(t,s)}},t.prototype.$l=function(t,i){var n=new tz(i);if(null!==t){var e=this.gl.indexOf(t);n.Me(e,{be:i})}return n},t.prototype.Vl=function(t,i){return void 0===i&&(i=2),this.$l(this.Au(t),i)},t.prototype.Al=function(t){this.Cl&&this.Cl(t),this.gl.forEach(function(t){return t.ll().Lo().V()})},t.prototype.sf=function(){this.Al(new tz(1))},t.prototype.lf=function(t,i,n){var e=new i0(this,t,i);return this.vf(e,n),e},t.prototype.vf=function(t,i){var n=t.I().priceScaleId,e=void 0!==n?n:this.cf();i.zh(t,e),tR(e)||t.rh(t.I())},t}(),iB={allowDownsampling:!0},iU=function(){function t(t,i){var n=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return n._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter(function(i){return i!=t})},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach(function(i){return i.call(t)})},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}(),iW=function(){function t(t,i){this.st=t,this.rt=i}return t.prototype.ln=function(t){return this.st===t.st&&this.rt===t.rt},t}();function iG(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function iq(t){var i=u(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function iQ(t,i){var n=t.createElement("canvas"),e=iG(n);return n.style.width=i.st+"px",n.style.height=i.rt+"px",n.width=i.st*e,n.height=i.rt*e,n}function iA(t,i){var n,e,s=u(t.ownerDocument).createElement("canvas");t.appendChild(s);var r=(n=s,void 0===e&&(e=iB),new iU(n,e));return r.resizeCanvas({width:i.st,height:i.rt}),r}var i1="undefined"!=typeof window,iN=function(){if(!i1)return!1;var t=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||!!i1&&("ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch));return"onorientationchange"in window&&t}(),i3=function(){if(!i1)return!1;var t=/Android/i.test(navigator.userAgent),i=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent);return t||i}(),iH=function(){function t(t,i,n){this._f=0,this.df=null,this.wf=null,this.Mf=!1,this.bf=null,this.mf=!1,this.gf=!1,this.pf=null,this.yf=null,this.kf=null,this.xf=null,this.Nf=0,this.Sf=!1,this.Cf=!1,this.Df=!1,this.Tf=t,this.Ef=i,this.Si=n,this.Lf()}return t.prototype.un=function(){null!==this.pf&&(this.pf(),this.pf=null),null!==this.yf&&(this.yf(),this.yf=null),null!==this.kf&&(this.kf(),this.kf=null),this.Bf(),this.Af()},t.prototype.Vf=function(t){var i=this;this.yf&&this.yf();var n=this.Of.bind(this);this.yf=function(){i.Tf.removeEventListener("mousemove",n)},this.Tf.addEventListener("mousemove",n),iJ(t)&&this.Of(t);var e=this.zf(t);this.Pf(e,this.Ef.Ff)},t.prototype.Af=function(){null!==this.df&&clearTimeout(this.df),this._f=0,this.df=null},t.prototype.Of=function(t){if(!this.Df||iJ(t)){var i=this.zf(t);this.Pf(i,this.Ef.If)}},t.prototype.Wf=function(t){if((!("button"in t)||0===t.button)&&null===this.xf){var i=iJ(t);if(!this.Cf||!i){this.Sf=!0;var n=this.zf(t),e=l(this.bf),s=Math.abs(e.g-n.Rf),r=Math.abs(e.p-n.jf),o=s+r>5;if(o||!i){if(o&&!this.mf&&i){var h=.5*s,u=r>=h&&!this.Si.Uf,a=h>r&&!this.Si.qf;u||a||(this.Cf=!0)}o&&(this.mf=!0,this.gf=!0,i&&this.Bf()),this.Cf||(this.Pf(n,this.Ef.Hf),i&&i9(t))}}}},t.prototype.Yf=function(t){if(!("button"in t)||0===t.button){var i=this.zf(t);this.Bf(),this.bf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),iJ(t)&&this.Kf(t),this.Pf(i,this.Ef.$f),++this._f,this.df&&this._f>1?(this.Pf(i,this.Ef.Xf),this.Af()):this.gf||this.Pf(i,this.Ef.Zf),iJ(t)&&(i9(t),this.Kf(t),0===t.touches.length&&(this.Mf=!1))}},t.prototype.Bf=function(){null!==this.wf&&(clearTimeout(this.wf),this.wf=null)},t.prototype.Jf=function(t){if(!("button"in t)||0===t.button){var i=this.zf(t);this.gf=!1,this.mf=!1,this.Cf=!1,iJ(t)&&this.Vf(t),this.bf={g:i.Rf,p:i.jf},this.kf&&(this.kf(),this.kf=null);var n=this.Wf.bind(this),e=this.Yf.bind(this),s=this.Tf.ownerDocument.documentElement;this.kf=function(){s.removeEventListener("touchmove",n),s.removeEventListener("touchend",e),s.removeEventListener("mousemove",n),s.removeEventListener("mouseup",e)},s.addEventListener("touchmove",n,{passive:!1}),s.addEventListener("touchend",e,{passive:!1}),this.Bf(),iJ(t)&&1===t.touches.length?this.wf=setTimeout(this.Gf.bind(this,t),240):(s.addEventListener("mousemove",n),s.addEventListener("mouseup",e)),this.Df=!0,this.Pf(i,this.Ef.Qf),this.df||(this._f=0,this.df=setTimeout(this.Af.bind(this),500))}},t.prototype.Lf=function(){var t=this;this.Tf.addEventListener("mouseenter",this.Vf.bind(this)),this.Tf.addEventListener("touchcancel",this.Bf.bind(this));var i=this.Tf.ownerDocument,n=function(i){t.Ef.tc&&(i.composed&&t.Tf.contains(i.composedPath()[0])||i.target&&t.Tf.contains(i.target)||t.Ef.tc())};this.pf=function(){i.removeEventListener("mousedown",n),i.removeEventListener("touchstart",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),this.Tf.addEventListener("mouseleave",this.Kf.bind(this)),this.Tf.addEventListener("touchstart",this.Jf.bind(this),{passive:!0}),iN||this.Tf.addEventListener("mousedown",this.Jf.bind(this)),this.ic(),this.Tf.addEventListener("touchmove",function(){},{passive:!1})},t.prototype.ic=function(){var t=this;void 0===this.Ef.nc&&void 0===this.Ef.hc&&void 0===this.Ef.sc||(this.Tf.addEventListener("touchstart",function(i){return t.rc(i.touches)},{passive:!0}),this.Tf.addEventListener("touchmove",function(i){if(2===i.touches.length&&null!==t.xf&&void 0!==t.Ef.hc){var n=iX(i.touches[0],i.touches[1])/t.Nf;t.Ef.hc(t.xf,n),i9(i)}},{passive:!1}),this.Tf.addEventListener("touchend",function(i){t.rc(i.touches)}))},t.prototype.rc=function(t){1===t.length&&(this.Sf=!1),2!==t.length||this.Sf||this.Mf?this.ec():this.uc(t)},t.prototype.uc=function(t){var i=ij(this.Tf);this.xf={g:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,p:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.Nf=iX(t[0],t[1]),void 0!==this.Ef.nc&&this.Ef.nc(),this.Bf()},t.prototype.ec=function(){null!==this.xf&&(this.xf=null,void 0!==this.Ef.sc&&this.Ef.sc())},t.prototype.Kf=function(t){this.yf&&this.yf();var i=this.zf(t);this.Pf(i,this.Ef.ac)},t.prototype.Gf=function(t){var i=this.zf(t);this.Pf(i,this.Ef.oc),this.gf=!0,this.Mf=!0},t.prototype.Pf=function(t,i){i&&i.call(this.Ef,t)},t.prototype.zf=function(t){i="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var i,n=ij(this.Tf);return{lc:i.clientX,fc:i.clientY,Rf:i.pageX,jf:i.pageY,cc:i.screenX,vc:i.screenY,_c:i.clientX-n.left,dc:i.clientY-n.top,wc:t.ctrlKey,Mc:t.altKey,bc:t.shiftKey,mc:t.metaKey,ye:t.type.startsWith("mouse")?"mouse":"touch",gc:t.view}},t}();function ij(t){return t.getBoundingClientRect()||{left:0,top:0}}function iX(t,i){var n=t.clientX-i.clientX,e=t.clientY-i.clientY;return Math.sqrt(n*n+e*e)}function iJ(t){return Boolean(t.touches)}function i9(t){t.cancelable&&t.preventDefault()}var iZ=function(){function t(t,i,n,e,s){if(this.yc=0,this.kc=0,this.xc=0,this.Nc=0,this.Sc=0,this.Cc=0,this.Dc=0,this.Tc=!1,this.Ec=t,this.Lc=t.Bc()[i],this.Ac=t.Bc()[n],this.Vc=document.createElement("tr"),this.Vc.style.height="1px",this.Oc=i,this.zc=n,this.Pc=s,this.Fc=document.createElement("td"),this.Fc.style.position="relative",this.Fc.style.padding="0",this.Fc.style.margin="0",this.Fc.setAttribute("colspan","3"),this.Ic(),this.Vc.appendChild(this.Fc),e)this.Wc=null,this.Rc=null;else{this.Wc=document.createElement("div"),this.Wc.style.position="absolute",this.Wc.style.zIndex="50",this.Wc.style.top="-4px",this.Wc.style.height="9px",this.Wc.style.width="100%",this.Wc.style.backgroundColor="",this.Wc.style.cursor="row-resize",this.Fc.appendChild(this.Wc);var r={Ff:this.jc.bind(this),ac:this.Uc.bind(this),Qf:this.qc.bind(this),Hf:this.Hc.bind(this),$f:this.Yc.bind(this)};this.Rc=new iH(this.Wc,r,{Uf:!1,qf:!0})}}return t.prototype.un=function(){null!==this.Rc&&this.Rc.un()},t.prototype.Kc=function(){return this.Vc},t.prototype.$c=function(){return new iW(this.Lc.$c().st,1)},t.prototype.Xc=function(){var t=this.$c(),i=iQ(document,t),n=iq(i);return n.fillStyle=this.Ec.I().timeScale.borderColor,n.fillRect(0,0,t.st,t.rt),i},t.prototype.V=function(){this.Ic()},t.prototype.Ic=function(){this.Fc.style.background=this.Ec.I().timeScale.borderColor},t.prototype.jc=function(t){null!==this.Wc&&(this.Wc.style.backgroundColor="hsla(225,8%,72%,.2)")},t.prototype.Uc=function(t){null===this.Wc||this.Tc||(this.Wc.style.backgroundColor="")},t.prototype.qc=function(t){this.yc=t.jf,this.kc=0,this.xc=this.Lc.$c().rt+this.Ac.$c().rt,this.Nc=this.Lc.qo()+this.Ac.qo(),this.Sc=30,this.Cc=this.xc-this.Sc,this.Dc=this.Nc/this.xc,this.Tc=!0},t.prototype.Hc=function(t){var i=this;this.kc=t.jf-this.yc;var n=this.Lc.$c().rt,e=tt(n+this.kc,this.Sc,this.Cc)*this.Dc,s=this.Nc-e;this.Lc.Ho(e),this.Ac.Ho(s),this.Ec.Zc(),this.Lc.$c().rt!==n&&(this.yc=t.jf),this.Ec.ct().Bl(),this.Pc.rn(function(){return{Jc:{Fs:i.Oc,Mt:i.Lc.$c().rt},Ee:{Fs:i.zc,Mt:i.Ac.$c().rt}}})},t.prototype.Yc=function(t){this.yc=0,this.kc=0,this.xc=0,this.Nc=0,this.Sc=0,this.Cc=0,this.Dc=0,this.Tc=!1,this.Uc(t)},t}(),i4=function(){function t(t,i,n,e){this.Tu=new ie(200),this.le=0,this.Gc="",this.Wu="",this.Nu=[],this.Qc=new Map,this.le=t,this.Gc=i,this.Wu=tO(t,n,e)}return t.prototype.un=function(){this.Tu.Su(),this.Nu=[],this.Qc.clear()},t.prototype.tv=function(t,i,n,e,s){var r=this.iv(t,i);if("left"!==s){var o=iG(t.canvas);n-=Math.floor(r.nv*o)}e-=Math.floor(r.Mt/2),t.drawImage(r.hv,n,e,r.wt,r.Mt)},t.prototype.iv=function(t,i){var n,e=this;if(this.Qc.has(i))n=h(this.Qc.get(i));else{if(this.Nu.length>=200){var s=h(this.Nu.shift());this.Qc.delete(s)}var r=iG(t.canvas),o=Math.ceil(this.le/4.5),u=Math.round(this.le/10),l=Math.ceil(this.Tu.Ot(t,i)),a=te(Math.round(l+2*o)),c=te(this.le+2*o),f=iQ(document,new iW(a,c));n={Vt:i,nv:Math.round(Math.max(1,l)),wt:Math.ceil(a*r),Mt:Math.ceil(c*r),hv:f},0!==l&&(this.Nu.push(n.Vt),this.Qc.set(n.Vt,n)),L(t=iq(n.hv),r,function(){t.font=e.Wu,t.fillStyle=e.Gc,t.fillText(i,0,c-o-u)})}return n},t}(),i6=function(){function t(t,i,n,e){var s=this;this.Qt=null,this.sv=null,this.rv=null,this.ev=!1,this.uv=new ie(50),this.av=new i4(11,"#000"),this.Gc=null,this.Wu=null,this.ov=0,this.lv=function(){s.fv(s.Dl.I()),s.wi.cv().ct().Pr()},this.vv=function(){s.wi.cv().ct().Pr()},this.wi=t,this.Si=i,this.Dl=n,this._v="left"===e,this.Fc=document.createElement("div"),this.Fc.style.height="100%",this.Fc.style.overflow="hidden",this.Fc.style.width="25px",this.Fc.style.left="0",this.Fc.style.position="relative",this.dv=iA(this.Fc,new iW(16,16)),this.dv.subscribeCanvasConfigured(this.lv);var r=this.dv.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.wv=iA(this.Fc,new iW(16,16)),this.wv.subscribeCanvasConfigured(this.vv);var o=this.wv.canvas;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";var h={Qf:this.qc.bind(this),Hf:this.Hc.bind(this),tc:this.Mv.bind(this),$f:this.Yc.bind(this),Xf:this.bv.bind(this),Ff:this.mv.bind(this),ac:this.Uc.bind(this)};this.Rc=new iH(this.wv.canvas,h,{Uf:!1,qf:!0})}return t.prototype.un=function(){this.Rc.un(),this.wv.unsubscribeCanvasConfigured(this.vv),this.wv.destroy(),this.dv.unsubscribeCanvasConfigured(this.lv),this.dv.destroy(),null!==this.Qt&&this.Qt.Wh().sn(this),this.Qt=null,null!==this.rv&&(clearTimeout(this.rv),this.rv=null),this.av.un()},t.prototype.Kc=function(){return this.Fc},t.prototype.$=function(){return this.Si.backgroundColor},t.prototype.S=function(){return u(this.Qt).I().borderColor},t.prototype.gv=function(){return this.Si.textColor},t.prototype.Pt=function(){return this.Si.fontSize},t.prototype.pv=function(){return tO(this.Pt(),this.Si.fontFamily)},t.prototype.yv=function(){var t=this.Dl.I(),i=this.Gc!==t.ut,n=this.Wu!==t.Nt;return(i||n)&&(this.fv(t),this.Gc=t.ut),n&&(this.uv.Su(),this.Wu=t.Nt),t},t.prototype.kv=function(){if(null===this.Qt)return 0;var t=34,i=this.yv(),n=iq(this.dv.canvas),e=this.Qt.Vn();n.font=this.pv(),e.length>0&&(t=Math.max(this.uv.Ot(n,e[0].Ln),this.uv.Ot(n,e[e.length-1].Ln)));for(var s=this.xv(),r=s.length;r--;){var o=this.uv.Ot(n,s[r].Vt());o>t&&(t=o)}var h=Math.ceil(i.Tt+i.Dt+i.Bt+i.At+t);return h+h%2},t.prototype.Nv=function(t){if(t.st<0||t.rt<0)throw Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.sv&&this.sv.ln(t)||(this.sv=t,this.dv.resizeCanvas({width:t.st,height:t.rt}),this.wv.resizeCanvas({width:t.st,height:t.rt}),this.Fc.style.width=t.st+"px",this.Fc.style.height=t.rt+"px",this.Fc.style.minWidth=t.st+"px")},t.prototype.Sv=function(){return u(this.sv).st},t.prototype.ci=function(t){this.Qt!==t&&(null!==this.Qt&&this.Qt.Wh().sn(this),this.Qt=t,t.Wh().Gi(this.qn.bind(this),this))},t.prototype.J=function(){return this.Qt},t.prototype.Su=function(){var t=this.wi.Cv();this.wi.cv().ct().el(t,u(this.J()))},t.prototype.Dv=function(t){if(null!==this.sv){if(1!==t){var i=iq(this.dv.canvas);this.Tv(),this.Ev(i,this.dv.pixelRatio),this.cu(i,this.dv.pixelRatio),this.Lv(i,this.dv.pixelRatio),this.Bv(i,this.dv.pixelRatio)}var n=iq(this.wv.canvas),e=this.sv.st,s=this.sv.rt;L(n,this.wv.pixelRatio,function(){n.clearRect(0,0,e,s)}),this.Av(n,this.wv.pixelRatio)}},t.prototype.Xc=function(){return this.dv.canvas},t.prototype.qc=function(t){if(null!==this.Qt&&!this.Qt.ii()&&this.wi.cv().I().handleScale.axisPressedMouseMove.price){var i=this.wi.cv().ct(),n=this.wi.Cv();this.ev=!0,i.Qo(n,this.Qt,t.dc)}},t.prototype.Hc=function(t){if(null!==this.Qt&&this.wi.cv().I().handleScale.axisPressedMouseMove.price){var i=this.wi.cv().ct(),n=this.wi.Cv(),e=this.Qt;i.tl(n,e,t.dc)}},t.prototype.Mv=function(){if(null!==this.Qt&&this.wi.cv().I().handleScale.axisPressedMouseMove.price){var t=this.wi.cv().ct(),i=this.wi.Cv(),n=this.Qt;this.ev&&(this.ev=!1,t.il(i,n))}},t.prototype.Yc=function(t){if(null!==this.Qt&&this.wi.cv().I().handleScale.axisPressedMouseMove.price){var i=this.wi.cv().ct(),n=this.wi.Cv();this.ev=!1,i.il(n,this.Qt)}},t.prototype.bv=function(t){this.wi.cv().I().handleScale.axisDoubleClickReset&&this.Su()},t.prototype.mv=function(t){null!==this.Qt&&(!this.wi.cv().ct().I().handleScale.axisPressedMouseMove.price||this.Qt.fh()||this.Qt._h()||this.Vv(1))},t.prototype.Uc=function(t){this.Vv(0)},t.prototype.xv=function(){var t=this,i=[],n=null===this.Qt?void 0:this.Qt;return function(e){for(var s=0;s<e.length;++s)for(var r=e[s].vi(t.wi.Cv(),n),o=0;o<r.length;o++)i.push(r[o])}(this.wi.Cv().Oh()),i},t.prototype.Ev=function(t,i){var n=this;if(null!==this.sv){var e=this.sv.st,s=this.sv.rt;L(t,i,function(){D(t,0,0,e,s,n.$())})}},t.prototype.cu=function(t,i){if(null!==this.sv&&null!==this.Qt&&this.Qt.I().borderVisible){t.save(),t.fillStyle=this.S();var n,e=Math.max(1,Math.floor(this.yv().Tt*i));n=this._v?Math.floor(this.sv.st*i)-e:0,t.fillRect(n,0,e,Math.ceil(this.sv.rt*i)),t.restore()}},t.prototype.Lv=function(t,i){if(null!==this.sv&&null!==this.Qt){var n=this.Qt.Vn();t.save(),t.strokeStyle=this.S(),t.font=this.pv(),t.fillStyle=this.S();var e=this.yv(),s=this.Qt.I().borderVisible&&this.Qt.I().drawTicks,r=this._v?Math.floor((this.sv.st-e.Dt)*i-e.Tt*i):Math.floor(e.Tt*i),o=this._v?Math.round(r-e.Bt*i):Math.round(r+e.Dt*i+e.Bt*i),h=this._v?"right":"left",u=Math.max(1,Math.floor(i)),l=Math.floor(.5*i);if(s){var a=Math.round(e.Dt*i);t.beginPath();for(var c=0,f=n;c<f.length;c++){var p=f[c];t.rect(r,Math.round(p.En*i)-l,a,u)}t.fill()}t.fillStyle=this.gv();for(var v=0,d=n;v<d.length;v++)p=d[v],this.av.tv(t,p.Ln,o,Math.round(p.En*i),h);t.restore()}},t.prototype.Tv=function(){if(null!==this.sv&&null!==this.Qt){var t=this.sv.rt/2,i=[],n=this.Qt.Oh().slice(),e=this.wi.Cv(),s=this.yv();this.Qt===e.Ti()&&this.wi.Cv().Oh().forEach(function(t){e.Vu(t)&&n.push(t)});var r=this.Qt.j()[0],o=this.Qt;n.forEach(function(n){var s=n.vi(e,o);s.forEach(function(t){t.$t(null),t.Xt()&&i.push(t)}),r===n&&s.length>0&&(t=s[0].Ft())});var h=i.filter(function(i){return i.Ft()<=t}),u=i.filter(function(i){return i.Ft()>t});if(h.sort(function(t,i){return i.Ft()-t.Ft()}),h.length&&u.length&&u.push(h[0]),u.sort(function(t,i){return t.Ft()-i.Ft()}),i.forEach(function(t){return t.$t(t.Ft())}),this.Qt.I().alignLabels){for(var l,a,c=1;c<h.length;c++){var f=h[c],p=(l=h[c-1]).Mt(s,!1);f.Ft()>(a=l.Kt())-p&&f.$t(a-p)}for(var v=1;v<u.length;v++)f=u[v],p=(l=u[v-1]).Mt(s,!0),f.Ft()<(a=l.Kt())+p&&f.$t(a+p)}}},t.prototype.Bv=function(t,i){var n=this;if(null!==this.sv){t.save();var e=this.sv,s=this.xv(),r=this.yv(),o=this._v?"right":"left";s.forEach(function(s){if(s.Zt()){var h=s.W(u(n.Qt));t.save(),h.h(t,r,n.uv,e.st,o,i),t.restore()}}),t.restore()}},t.prototype.Av=function(t,i){var n=this;if(null!==this.sv&&null!==this.Qt){t.save();var e=this.sv,s=this.wi.cv().ct(),r=[],o=this.wi.Cv(),h=s.jl().vi(o,this.Qt);h.length&&r.push(h);var l=this.yv(),a=this._v?"right":"left";r.forEach(function(s){s.forEach(function(s){t.save(),s.W(u(n.Qt)).h(t,l,n.uv,e.st,a,i),t.restore()})}),t.restore()}},t.prototype.Vv=function(t){this.Fc.style.cursor=1===t?"ns-resize":"default"},t.prototype.qn=function(){var t=this,i=this.kv();if(this.ov<i){var n=this.wi.cv();null===this.rv&&(this.rv=setTimeout(function(){n&&n.ct().Bl(),t.rv=null},100))}this.ov=i},t.prototype.fv=function(t){this.av.un(),this.av=new i4(t.Pt,t.ut,t.oe)},t}(),i7=i3,i2=function(){function t(t,i){var n=this;this.sv=new iW(0,0),this.Ov=null,this.zv=null,this.Pv=null,this.Fv=!1,this.Iv=new J,this.Wv=0,this.Rv=!1,this.jv=null,this.Uv=!1,this.qv=null,this.lv=function(){return n.Hv&&n.ri().Pr()},this.vv=function(){return n.Hv&&n.ri().Pr()},this.Yv=t,this.Hv=i,this.Hv.ol().Gi(this.Kv.bind(this),this,!0),this.$v=document.createElement("td"),this.$v.style.padding="0",this.$v.style.position="relative";var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this.Xv=document.createElement("td"),this.Xv.style.padding="0",this.Zv=document.createElement("td"),this.Zv.style.padding="0",this.$v.appendChild(e),this.dv=iA(e,new iW(16,16)),this.dv.subscribeCanvasConfigured(this.lv);var s=this.dv.canvas;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.wv=iA(e,new iW(16,16)),this.wv.subscribeCanvasConfigured(this.vv);var r=this.wv.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Vc=document.createElement("tr"),this.Vc.appendChild(this.Xv),this.Vc.appendChild(this.$v),this.Vc.appendChild(this.Zv),this.Jv();var o=this.cv().I().handleScroll;this.Rc=new iH(this.wv.canvas,this,{Uf:!o.vertTouchDrag,qf:!o.horzTouchDrag})}return t.prototype.un=function(){null!==this.Ov&&this.Ov.un(),null!==this.zv&&this.zv.un(),this.wv.unsubscribeCanvasConfigured(this.vv),this.wv.destroy(),this.dv.unsubscribeCanvasConfigured(this.lv),this.dv.destroy(),null!==this.Hv&&this.Hv.ol().sn(this),this.Rc.un()},t.prototype.Cv=function(){return u(this.Hv)},t.prototype.Gv=function(i){null!==this.Hv&&this.Hv.ol().sn(this),this.Hv=i,null!==this.Hv&&this.Hv.ol().Gi(t.prototype.Kv.bind(this),this,!0),this.Jv()},t.prototype.cv=function(){return this.Yv},t.prototype.Kc=function(){return this.Vc},t.prototype.Jv=function(){if(null!==this.Hv&&(this.Qv(),0!==this.ri().O().length)){if(null!==this.Ov){var t=this.Hv.Jo();this.Ov.ci(u(t))}if(null!==this.zv){var i=this.Hv.Go();this.zv.ci(u(i))}}},t.prototype.qo=function(){return null!==this.Hv?this.Hv.qo():0},t.prototype.Ho=function(t){this.Hv&&this.Hv.Ho(t)},t.prototype.Ff=function(t){if(this.Hv){var i=t._c,n=t.dc;iN||this.t_(i,n)}},t.prototype.Qf=function(t){if(this.Rv=!1,this.Uv=null!==this.jv,this.Hv){if(document.activeElement!==document.body&&document.activeElement!==document.documentElement)u(document.activeElement).blur();else{var i=document.getSelection();null!==i&&i.removeAllRanges()}var n=this.ri();if(!this.Hv.Ti().ii()&&!n.q().ii()){if(null!==this.jv){var e=n.jl();this.qv={x:e.bt(),y:e.gt()},this.jv={x:t._c,y:t.dc}}iN||this.t_(t._c,t.dc)}}},t.prototype.If=function(t){if(this.Hv){var i=t._c,n=t.dc;if(this.i_()&&this.n_(),!iN){this.t_(i,n);var e=this.Ru(i,n);this.ri().zl(e&&{Pl:e.Pl,h_:e.h_}),null!==e&&void 0!==e.gc.s_&&e.gc.s_(i,n)}}},t.prototype.Zf=function(t){if(null!==this.Hv){var i=t._c,n=t.dc,e=this.Ru(i,n);if(null!==e&&void 0!==e.gc.r_&&e.gc.r_(i,n),this.Iv.en()){var s=this.ri().jl().U();this.Iv.rn(s,{x:i,y:n})}this.e_()}},t.prototype.Hf=function(t){if(null!==this.Hv){var i=this.ri(),n=t._c,e=t.dc;if(null!==this.jv){this.Uv=!1;var s=u(this.qv),r=s.x+(n-this.jv.x),o=s.y+(e-this.jv.y);this.t_(r,o)}else this.i_()||this.t_(n,e);if(!i.q().ii()){var h=this.Yv.I().handleScroll;if(h.pressedMouseMove&&"touch"!==t.ye||(h.horzTouchDrag||h.vertTouchDrag)&&"mouse"!==t.ye){var l=this.Hv.Ti();null!==this.Pv||this.u_()||(this.Pv={x:t.lc,y:t.fc}),null===this.Pv||this.Pv.x===t.lc&&this.Pv.y===t.fc||this.Fv||(l.ii()||i.nl(this.Hv,l,t.dc),i.Gl(t._c),this.Fv=!0),this.Fv&&(l.ii()||i.hl(this.Hv,l,t.dc),i.Ql(t._c))}}}},t.prototype.$f=function(t){if(null!==this.Hv){this.Rv=!1;var i=this.ri();if(this.Fv){var n=this.Hv.Ti();i.sl(this.Hv,n),i.tf(),this.Pv=null,this.Fv=!1}}},t.prototype.oc=function(t){if(this.Rv=!0,null===this.jv&&i7){var i={x:t._c,y:t.dc};this.a_(i,i)}},t.prototype.ac=function(t){null!==this.Hv&&(this.Hv.ct().zl(null),i3||this.n_())},t.prototype.o_=function(){return this.Iv},t.prototype.nc=function(){this.Wv=1},t.prototype.hc=function(t,i){if(this.Yv.I().handleScale.pinch){var n=5*(i-this.Wv);this.Wv=i,this.ri().Zl(t.g,n)}},t.prototype.Ru=function(t,i){var n=this.Hv;if(null===n)return null;for(var e=0,s=n.Oh();e<s.length;e++){var r=s[e],o=this.l_(r._i(n),t,i);if(null!==o)return{Pl:r,gc:o.gc,h_:o.h_}}return null},t.prototype.f_=function(t,i){u("left"===i?this.Ov:this.zv).Nv(new iW(t,this.sv.rt))},t.prototype.$c=function(){return this.sv},t.prototype.Nv=function(t){if(t.st<0||t.rt<0)throw Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.sv.ln(t)||(this.sv=t,this.dv.resizeCanvas({width:t.st,height:t.rt}),this.wv.resizeCanvas({width:t.st,height:t.rt}),this.$v.style.width=t.st+"px",this.$v.style.height=t.rt+"px")},t.prototype.c_=function(){var t=u(this.Hv);t.Zo(t.Jo()),t.Zo(t.Go());for(var i=0,n=t.j();i<n.length;i++){var e=n[i];if(t.Vu(e)){var s=e.J();null!==s&&t.Zo(s),e.ji()}}},t.prototype.Xc=function(){return this.dv.canvas},t.prototype.Dv=function(t){if(0!==t&&null!==this.Hv){if(t>1&&this.c_(),null!==this.Ov&&this.Ov.Dv(t),null!==this.zv&&this.zv.Dv(t),1!==t){var i=iq(this.dv.canvas);i.save(),this.Ev(i,this.v_(),this.dv.pixelRatio),this.Hv&&(this.__(i,this.dv.pixelRatio),this.d_(i,this.dv.pixelRatio),this.w_(i,this.dv.pixelRatio)),i.restore()}var n=iq(this.wv.canvas);n.clearRect(0,0,Math.ceil(this.sv.st*this.wv.pixelRatio),Math.ceil(this.sv.rt*this.wv.pixelRatio)),this.M_(n,this.wv.pixelRatio)}},t.prototype.b_=function(){return this.Ov},t.prototype.m_=function(){return this.zv},t.prototype.v_=function(){return this.Yv.I().layout.backgroundColor},t.prototype.Kv=function(){null!==this.Hv&&this.Hv.ol().sn(this),this.Hv=null},t.prototype.Ev=function(t,i,n){var e=this;L(t,n,function(){D(t,0,0,e.sv.st,e.sv.rt,i)})},t.prototype.__=function(t,i){var n=u(this.Hv),e=n.ll().Lo().W(n.Mt(),n.wt(),n);null!==e&&(t.save(),e.h(t,i,!1),t.restore())},t.prototype.d_=function(t,i){var n=this.ri().Rl();this.g_(n,t,i),this.p_(n,t,i)},t.prototype.M_=function(t,i){this.p_(this.ri().jl(),t,i)},t.prototype.w_=function(t,i){for(var n=u(this.Hv).Oh(),e=0,s=n;e<s.length;e++){var r=s[e];this.g_(r,t,i)}for(var o=0,h=n;o<h.length;o++)r=h[o],this.p_(r,t,i)},t.prototype.p_=function(t,i,n){for(var e=u(this.Hv),s=t._i(e),r=e.Mt(),o=e.wt(),h=e.ct().Ol(),l=null!==h&&h.Pl===t,a=null!==h&&l&&void 0!==h.h_?h.h_.ju:void 0,c=0,f=s;c<f.length;c++){var p=f[c].W(r,o,e);null!==p&&(i.save(),p.h(i,n,l,a),i.restore())}},t.prototype.g_=function(t,i,n){for(var e=u(this.Hv),s=t._i(e),r=e.Mt(),o=e.wt(),h=e.ct().Ol(),l=null!==h&&h.Pl===t,a=null!==h&&l&&void 0!==h.h_?h.h_.ju:void 0,c=0,f=s;c<f.length;c++){var p=f[c].W(r,o,e);null!==p&&void 0!==p.o&&(i.save(),p.o(i,n,l,a),i.restore())}},t.prototype.l_=function(t,i,n){for(var e=u(this.Hv),s=0,r=t;s<r.length;s++){var o=r[s],h=o.W(this.sv.rt,this.sv.st,e);if(null!==h&&h.Ru){var l=h.Ru(i,n);if(null!==l)return{gc:o,h_:l}}}return null},t.prototype.Qv=function(){if(null!==this.Hv){var t=this.Yv;t.I().leftPriceScale.visible||null===this.Ov||(this.Xv.removeChild(this.Ov.Kc()),this.Ov.un(),this.Ov=null),t.I().rightPriceScale.visible||null===this.zv||(this.Zv.removeChild(this.zv.Kc()),this.zv.un(),this.zv=null);var i=t.ct().uf();t.I().leftPriceScale.visible&&null===this.Ov&&(this.Ov=new i6(this,t.I().layout,i,"left"),this.Xv.appendChild(this.Ov.Kc())),t.I().rightPriceScale.visible&&null===this.zv&&(this.zv=new i6(this,t.I().layout,i,"right"),this.Zv.appendChild(this.zv.Kc()))}},t.prototype.i_=function(){return i7&&null===this.jv},t.prototype.u_=function(){return i7&&this.Rv||null!==this.jv},t.prototype.y_=function(t){return Math.max(0,Math.min(t,this.sv.st-1))},t.prototype.k_=function(t){return Math.max(0,Math.min(t,this.sv.rt-1))},t.prototype.t_=function(t,i){this.ri().hf(this.y_(t),this.k_(i),u(this.Hv))},t.prototype.n_=function(){this.ri().rf()},t.prototype.e_=function(){this.Uv&&(this.jv=null,this.n_())},t.prototype.a_=function(t,i){this.jv=t,this.Uv=!1,this.t_(i.x,i.y);var n=this.ri().jl();this.qv={x:n.bt(),y:n.gt()}},t.prototype.ri=function(){return this.Yv.ct()},t}(),i5=function(){function t(t,i,n,e){var s=this;this.Ut=!0,this.sv=new iW(0,0),this.lv=function(){return s.Dv(3)},this._v="left"===t,this.Dl=n.uf,this.Si=i,this.x_=e,this.Fc=document.createElement("div"),this.Fc.style.width="25px",this.Fc.style.height="100%",this.Fc.style.overflow="hidden",this.dv=iA(this.Fc,new iW(16,16)),this.dv.subscribeCanvasConfigured(this.lv)}return t.prototype.un=function(){this.dv.unsubscribeCanvasConfigured(this.lv),this.dv.destroy()},t.prototype.Kc=function(){return this.Fc},t.prototype.$c=function(){return this.sv},t.prototype.Nv=function(t){if(t.st<0||t.rt<0)throw Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.sv.ln(t)||(this.sv=t,this.dv.resizeCanvas({width:t.st,height:t.rt}),this.Fc.style.width=t.st+"px",this.Fc.style.minWidth=t.st+"px",this.Fc.style.height=t.rt+"px",this.Ut=!0)},t.prototype.Dv=function(t){if((!(t<3)||this.Ut)&&0!==this.sv.st&&0!==this.sv.rt){this.Ut=!1;var i=iq(this.dv.canvas);this.Ev(i,this.dv.pixelRatio),this.cu(i,this.dv.pixelRatio)}},t.prototype.Xc=function(){return this.dv.canvas},t.prototype.cu=function(t,i){if(this.x_()){var n=this.sv.st;t.save(),t.fillStyle=this.Si.timeScale.borderColor;var e=Math.floor(this.Dl.I().Tt*i),s=this._v?Math.round(n*i)-e:0;t.fillRect(s,0,e,e),t.restore()}},t.prototype.Ev=function(t,i){var n=this;L(t,i,function(){D(t,0,0,n.sv.st,n.sv.rt,n.Si.layout.backgroundColor)})},t}();function nt(t,i){return t.Is>i.Is?t:i}var ni=function(){function t(t){var i=this;this.N_=null,this.S_=null,this.ae=null,this.C_=!1,this.sv=new iW(0,0),this.lv=function(){return i.Yv.ct().Pr()},this.vv=function(){return i.Yv.ct().Pr()},this.Yv=t,this.Si=t.I().layout,this.D_=document.createElement("tr"),this.T_=document.createElement("td"),this.T_.style.padding="0",this.E_=document.createElement("td"),this.E_.style.padding="0",this.Fc=document.createElement("td"),this.Fc.style.height="25px",this.Fc.style.padding="0",this.L_=document.createElement("div"),this.L_.style.width="100%",this.L_.style.height="100%",this.L_.style.position="relative",this.L_.style.overflow="hidden",this.Fc.appendChild(this.L_),this.dv=iA(this.L_,new iW(16,16)),this.dv.subscribeCanvasConfigured(this.lv);var n=this.dv.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.wv=iA(this.L_,new iW(16,16)),this.wv.subscribeCanvasConfigured(this.vv);var e=this.wv.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0",this.D_.appendChild(this.T_),this.D_.appendChild(this.Fc),this.D_.appendChild(this.E_),this.B_(),this.Yv.ct().Uo().Gi(this.B_.bind(this),this),this.Rc=new iH(this.wv.canvas,this,{Uf:!0,qf:!1})}return t.prototype.un=function(){this.Rc.un(),null!==this.N_&&this.N_.un(),null!==this.S_&&this.S_.un(),this.wv.unsubscribeCanvasConfigured(this.vv),this.wv.destroy(),this.dv.unsubscribeCanvasConfigured(this.lv),this.dv.destroy()},t.prototype.Kc=function(){return this.D_},t.prototype.A_=function(){return this.N_},t.prototype.V_=function(){return this.S_},t.prototype.Qf=function(t){if(!this.C_){this.C_=!0;var i=this.Yv.ct();!i.q().ii()&&this.Yv.I().handleScale.axisPressedMouseMove.time&&i.Xl(t._c)}},t.prototype.tc=function(){var t=this.Yv.ct();!t.q().ii()&&this.C_&&(this.C_=!1,this.Yv.I().handleScale.axisPressedMouseMove.time&&t.nf())},t.prototype.Hf=function(t){var i=this.Yv.ct();!i.q().ii()&&this.Yv.I().handleScale.axisPressedMouseMove.time&&i.if(t._c)},t.prototype.$f=function(t){this.C_=!1;var i=this.Yv.ct();i.q().ii()&&!this.Yv.I().handleScale.axisPressedMouseMove.time||i.nf()},t.prototype.Xf=function(){this.Yv.I().handleScale.axisDoubleClickReset&&this.Yv.ct().xe()},t.prototype.Ff=function(t){this.Yv.ct().I().handleScale.axisPressedMouseMove.time&&this.Vv(1)},t.prototype.ac=function(t){this.Vv(0)},t.prototype.$c=function(){return this.sv},t.prototype.O_=function(t,i,n){this.sv&&this.sv.ln(t)||(this.sv=t,this.dv.resizeCanvas({width:t.st,height:t.rt}),this.wv.resizeCanvas({width:t.st,height:t.rt}),this.Fc.style.width=t.st+"px",this.Fc.style.height=t.rt+"px"),null!==this.N_&&this.N_.Nv(new iW(i,t.rt)),null!==this.S_&&this.S_.Nv(new iW(n,t.rt))},t.prototype.z_=function(){var t=this.P_();return Math.ceil(t.Tt+t.Dt+t.Pt+t.Et+t.Lt)},t.prototype.V=function(){this.Yv.ct().q().Vn()},t.prototype.Xc=function(){return this.dv.canvas},t.prototype.Dv=function(t){if(0!==t){if(1!==t){var i=iq(this.dv.canvas);this.Ev(i,this.dv.pixelRatio),this.cu(i,this.dv.pixelRatio),this.Lv(i,this.dv.pixelRatio),null!==this.N_&&this.N_.Dv(t),null!==this.S_&&this.S_.Dv(t)}var n=iq(this.wv.canvas),e=this.wv.pixelRatio;n.clearRect(0,0,Math.ceil(this.sv.st*e),Math.ceil(this.sv.rt*e)),this.F_([this.Yv.ct().jl()],n,e)}},t.prototype.Ev=function(t,i){var n=this;L(t,i,function(){D(t,0,0,n.sv.st,n.sv.rt,n.v_())})},t.prototype.cu=function(t,i){if(this.Yv.I().timeScale.borderVisible){t.save(),t.fillStyle=this.I_();var n=Math.max(1,Math.floor(this.P_().Tt*i));t.fillRect(0,0,Math.ceil(this.sv.st*i),n),t.restore()}},t.prototype.Lv=function(t,i){var n=this,e=this.Yv.ct().q().Vn();if(e&&0!==e.length){var s=e.reduce(nt,e[0]).Is;s>30&&s<40&&(s=30),t.save(),t.strokeStyle=this.I_();var r=this.P_(),o=r.Tt+r.Dt+r.Et+r.Pt-r.zt;t.textAlign="center",t.fillStyle=this.I_();var h=Math.floor(this.P_().Tt*i),u=Math.max(1,Math.floor(i)),l=Math.floor(.5*i);if(this.Yv.ct().q().I().borderVisible){t.beginPath();for(var a=Math.round(r.Dt*i),c=e.length;c--;){var f=Math.round(e[c].En*i);t.rect(f-l,h,u,a)}t.fill()}t.fillStyle=this.ce(),L(t,i,function(){t.font=n.W_();for(var i,r=0,h=e;r<h.length;r++)(i=h[r]).Is<s&&t.fillText(i.Ln,i.En,o);t.font=n.R_();for(var u=0,l=e;u<l.length;u++)(i=l[u]).Is>=s&&t.fillText(i.Ln,i.En,o)})}},t.prototype.F_=function(t,i,n){for(var e=this.P_(),s=0,r=t;s<r.length;s++)for(var o=0,h=r[s].di();o<h.length;o++){var u=h[o];i.save(),u.W().h(i,e,n),i.restore()}},t.prototype.v_=function(){return this.Si.backgroundColor},t.prototype.I_=function(){return this.Yv.I().timeScale.borderColor},t.prototype.ce=function(){return this.Si.textColor},t.prototype.le=function(){return this.Si.fontSize},t.prototype.W_=function(){return tO(this.le(),this.Si.fontFamily)},t.prototype.R_=function(){return tO(this.le(),this.Si.fontFamily,"bold")},t.prototype.P_=function(){null===this.ae&&(this.ae={Tt:1,zt:NaN,Et:NaN,Lt:NaN,si:NaN,Dt:3,Pt:NaN,Nt:"",hi:new ie});var t=this.ae,i=this.W_();if(t.Nt!==i){var n=this.le();t.Pt=n,t.Nt=i,t.Et=Math.ceil(n/2.5),t.Lt=t.Et,t.si=Math.ceil(n/2),t.zt=Math.round(this.le()/5),t.hi.Su()}return this.ae},t.prototype.Vv=function(t){this.Fc.style.cursor=1===t?"ew-resize":"default"},t.prototype.B_=function(){var t=this.Yv.ct(),i=t.I();i.leftPriceScale.visible||null===this.N_||(this.T_.removeChild(this.N_.Kc()),this.N_.un(),this.N_=null),i.rightPriceScale.visible||null===this.S_||(this.E_.removeChild(this.S_.Kc()),this.S_.un(),this.S_=null);var n={uf:this.Yv.ct().uf()};if(i.leftPriceScale.visible&&null===this.N_){var e=function(){return i.leftPriceScale.borderVisible&&t.q().I().borderVisible};this.N_=new i5("left",this.Yv.I(),n,e),this.T_.appendChild(this.N_.Kc())}i.rightPriceScale.visible&&null===this.S_&&(e=function(){return i.rightPriceScale.borderVisible&&t.q().I().borderVisible},this.S_=new i5("right",this.Yv.I(),n,e),this.E_.appendChild(this.S_.Kc()))},t}(),nn=function(){function t(t,i){this.j_=[],this.U_=[],this.q_=0,this.On=0,this.Ks=0,this.H_=0,this.Y_=0,this.K_=null,this.X_=!1,this.Iv=new J,this.Nl=new J,this.Z_=new J,this.Si=i,this.D_=document.createElement("div"),this.D_.classList.add("tv-lightweight-charts"),this.D_.style.overflow="hidden",this.D_.style.width="100%",this.D_.style.height="100%",(n=this.D_).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.J_=document.createElement("table"),this.J_.setAttribute("cellspacing","0"),this.D_.appendChild(this.J_),this.G_=this.Q_.bind(this),this.D_.addEventListener("wheel",this.G_,{passive:!1}),this.ri=new iz(this.Cl.bind(this),this.Si),this.ct().Ul().Gi(this.td.bind(this),this),this.nd=new ni(this),this.J_.appendChild(this.nd.Kc());var n,e=this.Si.width,s=this.Si.height;if(0===e||0===s){var r=t.getBoundingClientRect();0===e&&(e=Math.floor(r.width),e-=e%2),0===s&&(s=Math.floor(r.height),s-=s%2)}this.hd(e,s),this.sd(),t.appendChild(this.D_),this.rd(),this.ri.q().Zr().Gi(this.ri.Bl.bind(this.ri),this),this.ri.Uo().Gi(this.ri.Bl.bind(this.ri),this)}return t.prototype.ct=function(){return this.ri},t.prototype.I=function(){return this.Si},t.prototype.Bc=function(){return this.j_},t.prototype.un=function(){this.D_.removeEventListener("wheel",this.G_),0!==this.q_&&window.cancelAnimationFrame(this.q_),this.ri.Ul().sn(this),this.ri.q().Zr().sn(this),this.ri.Uo().sn(this),this.ri.un();for(var t=0,i=this.j_;t<i.length;t++){var n=i[t];this.J_.removeChild(n.Kc()),n.o_().sn(this),n.un()}this.j_=[];for(var e=0,s=this.U_;e<s.length;e++){var r=s[e];this.ed(r)}this.U_=[],u(this.nd).un(),null!==this.D_.parentElement&&this.D_.parentElement.removeChild(this.D_),this.Nl.un(),this.Iv.un()},t.prototype.hd=function(t,i,n){if(void 0===n&&(n=!1),this.On!==i||this.Ks!==t){this.On=i,this.Ks=t;var e=i+"px",s=t+"px";u(this.D_).style.height=e,u(this.D_).style.width=s,this.J_.style.height=e,this.J_.style.width=s,n?this.ud(new tz(3)):this.ri.Bl()}},t.prototype.Dv=function(t){void 0===t&&(t=new tz(3));for(var i=0;i<this.j_.length;i++)this.j_[i].Dv(t.ge(i).be);this.nd.Dv(t.me())},t.prototype.rh=function(t){this.ri.rh(t),this.rd();var i=t.width||this.Ks,n=t.height||this.On;this.hd(i,n)},t.prototype.o_=function(){return this.Iv},t.prototype.Ul=function(){return this.Nl},t.prototype.ad=function(){return this.Z_},t.prototype.od=function(){var t=this;null!==this.K_&&(this.ud(this.K_),this.K_=null);var i=this.j_[0],n=iQ(document,new iW(this.Ks,this.On)),e=iq(n),s=iG(n);return L(e,s,function(){var n=0,s=0,r=function(i){for(var r=0;r<t.j_.length;r++){var o=t.j_[r],h=o.$c().rt,l=u("left"===i?o.b_():o.m_()),a=l.Xc();if(e.drawImage(a,n,s,l.Sv(),h),s+=h,r<t.j_.length-1){var c=t.U_[r],f=c.$c(),p=c.Xc();e.drawImage(p,n,s,f.st,f.rt),s+=f.rt}}};t.ld()&&(r("left"),n=u(i.b_()).Sv()),s=0;for(var o=0;o<t.j_.length;o++){var h=t.j_[o],l=h.$c(),a=h.Xc();if(e.drawImage(a,n,s,l.st,l.rt),s+=l.rt,o<t.j_.length-1){var c=t.U_[o],f=c.$c(),p=c.Xc();e.drawImage(p,n,s,f.st,f.rt),s+=f.rt}}n+=i.$c().st,t.fd()&&(s=0,r("right"));var v=function(i){var r=u("left"===i?t.nd.A_():t.nd.V_()),o=r.$c(),h=r.Xc();e.drawImage(h,n,s,o.st,o.rt)};if(t.Si.timeScale.visible){n=0,t.ld()&&(v("left"),n=u(i.b_()).Sv());var d=t.nd.$c();a=t.nd.Xc(),e.drawImage(a,n,s,d.st,d.rt),t.fd()&&(n+=i.$c().st,v("right"),e.restore())}}),n},t.prototype.vd=function(t){return"none"===t?0:("left"!==t||this.ld())&&("right"!==t||this.fd())?0===this.j_.length?0:u("left"===t?this.j_[0].b_():this.j_[0].m_()).Sv():0},t.prototype.Zc=function(){this._d()},t.prototype._d=function(){for(var t,i=0,n=0,e=0,s=0,r=this.j_;s<r.length;s++){var o=r[s];this.ld()&&(n=Math.max(n,u(o.b_()).kv())),this.fd()&&(e=Math.max(e,u(o.m_()).kv())),i+=o.qo()}var h=this.Ks,l=this.On,a=Math.max(h-n-e,0),c=1*this.U_.length,f=this.Si.timeScale.visible?this.nd.z_():0;f%2&&(f+=1);for(var p=c+f,v=l<p?0:l-p,d=v/i,y=0,$=(null===(t=document.body.ownerDocument.defaultView)||void 0===t?void 0:t.devicePixelRatio)||1,g=0;g<this.j_.length;++g){(o=this.j_[g]).Gv(this.ri.Wl()[g]);var m,w=0;w=g===this.j_.length-1?Math.ceil((v-y)*$)/$:Math.round(o.qo()*d*$)/$,y+=m=Math.max(w,2),o.Nv(new iW(a,m)),this.ld()&&o.f_(n,"left"),this.fd()&&o.f_(e,"right"),o.Cv()&&this.ri.ql(o.Cv(),m)}this.nd.O_(new iW(a,f),n,e),this.ri.Dr(a),this.H_!==n&&(this.H_=n),this.Y_!==e&&(this.Y_=e)},t.prototype.Q_=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.Si.handleScroll.mouseWheel||0!==n&&this.Si.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.Si.handleScale.mouseWheel){var e=Math.sign(n)*Math.min(1,Math.abs(n)),s=t.clientX-this.D_.getBoundingClientRect().left;this.ct().Zl(s,e)}0!==i&&this.Si.handleScroll.mouseWheel&&this.ct().Jl(-80*i)}},t.prototype.ud=function(t){var i=t.me();if(3===i&&this.dd(),3===i||2===i){for(var n=this.ri.Wl(),e=0;e<n.length;e++)t.ge(e).dh&&n[e].ul();for(var s=t.Ne(),r=0,o=s;r<o.length;r++){var h=o[r];this.Se(h)}s.length>0&&(this.ri.zr(),this.ri.uo(),this.ri.Pr()),this.nd.V()}this.Dv(t)},t.prototype.Se=function(t){var i=this.ri.q();switch(t.ye){case 0:i.Gr();break;case 1:i.Qr(t.G);break;case 2:i.dr(t.G);break;case 3:i.wr(t.G);break;case 4:i.Rr()}},t.prototype.Cl=function(t){var i=this;null!==this.K_?this.K_.dn(t):this.K_=t,this.X_||(this.X_=!0,this.q_=window.requestAnimationFrame(function(){i.X_=!1,i.q_=0,null!==i.K_&&(i.ud(i.K_),i.K_=null)}))},t.prototype.dd=function(){this.sd()},t.prototype.ed=function(t){this.J_.removeChild(t.Kc()),t.un()},t.prototype.sd=function(){for(var t=this.ri.Wl(),i=t.length,n=this.j_.length,e=i;e<n;e++){var s=h(this.j_.pop());this.J_.removeChild(s.Kc()),s.o_().sn(this),s.un(),void 0!==(r=this.U_.pop())&&this.ed(r)}for(e=n;e<i;e++){if((s=new i2(this,t[e])).o_().Gi(this.wd.bind(this),this),this.j_.push(s),e>0){var r=new iZ(this,e-1,e,!1,this.Z_);this.U_.push(r),this.J_.insertBefore(r.Kc(),this.nd.Kc())}this.J_.insertBefore(s.Kc(),this.nd.Kc())}for(e=0;e<i;e++){var o=t[e];(s=this.j_[e]).Cv()!==o?s.Gv(o):s.Jv()}this.rd(),this._d()},t.prototype.Md=function(t,i){var n,e=new Map;if(null!==t&&this.ri.O().forEach(function(i){var n=i.ia(t);null!==n&&e.set(i,n)}),null!==t){var s=this.ri.q().ei(t);null!==s&&(n=s)}var r=this.ct().Ol();return{P:n,bd:i||void 0,md:null!==r&&r.Pl instanceof i0?r.Pl:void 0,gd:e,pd:null!==r&&void 0!==r.h_?r.h_.qu:void 0}},t.prototype.wd=function(t,i){var n=this;this.Iv.rn(function(){return n.Md(t,i)})},t.prototype.td=function(t,i){var n=this;this.Nl.rn(function(){return n.Md(t,i)})},t.prototype.rd=function(){var t=this.Si.timeScale.visible?"":"none";this.nd.Kc().style.display=t},t.prototype.ld=function(){return this.Si.leftPriceScale.visible},t.prototype.fd=function(){return this.Si.rightPriceScale.visible},t}();function ne(t,i,n){var e=n.value,s={Fs:i,P:t,G:[e,e,e,e]};return"color"in n&&void 0!==n.color&&(s.ut=n.color),s}function ns(t,i,n){return{Fs:i,P:t,G:[n.open,n.high,n.low,n.close]}}function nr(t){return void 0!==t.G}function no(t){return function(i,n,e){var s;return void 0===(s=e).open&&void 0===s.value?{P:i,Fs:n}:t(i,n,e)}}var nh={Candlestick:no(ns),Bar:no(ns),Area:no(ne),Histogram:no(ne),Line:no(ne)};function nu(t){return nh[t]}function nl(t){return 60*t*6e4}function na(t){return 60*t*1e3}var nc,nf=[{yd:1,Is:20},{yd:1e3*(nc=1),Is:19},{yd:na(1),Is:20},{yd:na(5),Is:21},{yd:na(30),Is:22},{yd:nl(1),Is:30},{yd:nl(3),Is:31},{yd:nl(6),Is:32},{yd:nl(12),Is:33},];function np(t,i){if(null!==i){var n=new Date(1e3*i),e=new Date(1e3*t);if(e.getUTCFullYear()!==n.getUTCFullYear())return 70;if(e.getUTCMonth()!==n.getUTCMonth())return 60;if(e.getUTCDate()!==n.getUTCDate())return 50;for(var s=nf.length-1;s>=0;--s)if(Math.floor(n.getTime()/nf[s].yd)!==Math.floor(e.getTime()/nf[s].yd))return nf[s].Is}return 20}function nv(t){if(!tD(t))throw Error("time must be of type BusinessDay");return{Ds:Math.round(new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0)).getTime()/1e3),Cs:t}}function nd(t){var i;if(!c(i=t))throw Error("time must be of type isUTCTimestamp");return{Ds:t}}function ny(t){return 0===t.length?null:tD(t[0].time)?nv:nd}function n$(t){var i;return c(i=t)?nd(t):tD(t)?nv(t):nv(ng(t))}function ng(t){var i=new Date(t);if(isNaN(i.getTime()))throw Error("Invalid date string="+t+", expected format=yyyy-mm-dd");return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function nm(t){p(t.time)&&(t.time=ng(t.time))}function nw(t){return{Fs:0,kd:new Map,Ih:t}}var n_=function(){function t(){this.xd=new Map,this.Nd=new Map,this.Sd=new Map,this.Cd=[]}return t.prototype.un=function(){this.xd.clear(),this.Nd.clear(),this.Sd.clear(),this.Cd=[]},t.prototype.Dd=function(t,i){var n=this;this.Sd.has(t)&&this.xd.forEach(function(i){return i.kd.delete(t)});var e=[];if(0!==i.length){!function(t){t.forEach(nm)}(i);var s,r=u(ny(i)),o=nh[s=t.wa()];e=i.map(function(i){var e=r(i.time),s=n.xd.get(e.Ds);void 0===s&&(s=nw(e),n.xd.set(e.Ds,s));var h=o(e,s.Fs,i);return s.kd.set(t,h),h})}return this.Td(),this.Ed(t,e),this.Ld(t)},t.prototype.Yl=function(t){return this.Dd(t,[])},t.prototype.Bd=function(t,i){nm(i);var n=u(ny([i]))(i.time),e=this.Sd.get(t);if(void 0!==e&&n.Ds<e.Ds)throw Error("Cannot update oldest data, last time="+e.Ds+", new time="+n.Ds);var s,r=this.xd.get(n.Ds),o=void 0===r;void 0===r&&(r=nw(n),this.xd.set(n.Ds,r));var h=(0,nh[s=t.wa()])(n,r.Fs,i);r.kd.set(t,h);var l=this.Ad(t,h);if(!o){var a=new Map;return null!==l&&a.set(t,l),{Vd:a,q:{Br:this.Od()}}}return this.Ld(t)},t.prototype.Ad=function(t,i){var n=this.Nd.get(t);void 0===n&&(n=[],this.Nd.set(t,n));var e=0!==n.length?n[n.length-1]:null,s=null;return null===e||i.P.Ds>e.P.Ds?nr(i)&&(n.push(i),s={Bl:!1,zd:[i]}):nr(i)?(n[n.length-1]=i,s={Bl:!1,zd:[i]}):(n.splice(-1,1),s={Bl:!0,zd:n}),this.Sd.set(t,i.P),s},t.prototype.Ed=function(t,i){0!==i.length?(this.Nd.set(t,i.filter(nr)),this.Sd.set(t,i[i.length-1].P)):(this.Nd.delete(t),this.Sd.delete(t))},t.prototype.Td=function(){var t=new Map;this.xd.forEach(function(i,n){i.kd.size>0&&t.set(n,i)}),this.xd=t},t.prototype.Pd=function(t){for(var i=-1,n=0;n<this.Cd.length&&n<t.length;++n){var e=this.Cd[n],s=t[n];if(e.P.Ds!==s.P.Ds){i=n;break}s.Ps=e.Ps}if(-1===i&&this.Cd.length!==t.length&&(i=Math.min(this.Cd.length,t.length)),-1===i)return -1;var r=function(i){var n=h(o.xd.get(t[i].P.Ds));n.Fs=i,n.kd.forEach(function(t){t.Fs=i})},o=this;for(n=i;n<t.length;++n)r(n);return function(t,i){void 0===i&&(i=0);for(var n=0===i||0===t.length?null:t[i-1].P.Ds,e=0,s=i;s<t.length;++s){var r=t[s];r.Ps=np(r.P.Ds,n),e+=r.P.Ds-(n||r.P.Ds),n=r.P.Ds}if(0===i&&t.length>1){var o=Math.ceil(e/(t.length-1)),h=t[0].P.Ds-o;t[0].Ps=np(t[0].P.Ds,h)}}(t,i),this.Cd=t,i},t.prototype.Od=function(){if(0===this.Nd.size)return null;var t=0;return this.Nd.forEach(function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].Fs))}),t},t.prototype.Ld=function(t){var i=Array.from(this.xd.values()).map(function(t){return{Ps:0,P:t.Ih}});i.sort(function(t,i){return t.P.Ds-i.P.Ds});var n=this.Pd(i),e={Vd:new Map,q:{Br:this.Od()}};if(-1!==n)this.Nd.forEach(function(t,i){e.Vd.set(i,{zd:t,Bl:!0})}),this.Nd.has(t)||e.Vd.set(t,{zd:[],Bl:!0}),e.q.Fd=this.Cd;else{var s=this.Nd.get(t);e.Vd.set(t,{zd:s||[],Bl:!0})}return e},t}(),nb={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,axisLabelVisible:!0,title:""},nS=function(){function t(t){this.fa=t}return t.prototype.applyOptions=function(t){this.fa.rh(t)},t.prototype.options=function(){return this.fa.I()},t.prototype.Id=function(){return this.fa},t}();function n8(t){var i=t.overlay,n=function(t,i){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&0>i.indexOf(e)&&(n[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(e=Object.getOwnPropertySymbols(t);s<e.length;s++)0>i.indexOf(e[s])&&Object.prototype.propertyIsEnumerable.call(t,e[s])&&(n[e[s]]=t[e[s]])}return n}(t,["overlay"]);return i&&(n.priceScaleId=""),n}var nx=function(){function t(t,i,n){this.Ie=t,this.Wd=i,this.Rd=n}return t.prototype.priceFormatter=function(){return this.Ie.Kh()},t.prototype.priceToCoordinate=function(t){var i=this.Ie.K();return null===i?null:this.Ie.J().Z(t,i.G)},t.prototype.coordinateToPrice=function(t){var i=this.Ie.K();return null===i?null:this.Ie.J().Ei(t,i.G)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new tE(new tM(t.from,t.to)).qs(),n=this.Ie.Yi();if(n.ii())return null;var e=n.Ba(i.ss(),1),s=n.Ba(i.rs(),-1),r=u(n.Ta()),o=u(n.Hi());if(null!==e&&null!==s&&e.Fs>s.Fs)return{barsBefore:t.from-r,barsAfter:o-t.to};var h={barsBefore:null===e||e.Fs===r?t.from-r:e.Fs-r,barsAfter:null===s||s.Fs===o?o-t.to:o-s.Fs};return null!==e&&null!==s&&(h.from=e.P.Cs||e.P.Ds,h.to=s.P.Cs||s.P.Ds),h},t.prototype.setData=function(t){this.Ie.wa(),this.Wd.jd(this.Ie,t)},t.prototype.update=function(t){this.Ie.wa(),this.Wd.oo(this.Ie,t)},t.prototype.setMarkers=function(t){var i=t.map(function(t){return s(s({},t),{time:n$(t.time)})});this.Ie.co(i)},t.prototype.applyOptions=function(t){var i=n8(t);this.Ie.rh(i)},t.prototype.options=function(){return d(this.Ie.I())},t.prototype.priceScale=function(){return this.Rd.priceScale(this.Ie.J().sh())},t.prototype.createPriceLine=function(t){var i=a(d(nb),t),n=this.Ie.vo(i);return new nS(n)},t.prototype.removePriceLine=function(t){this.Ie._o(t.Id())},t.prototype.seriesType=function(){return this.Ie.wa()},t}(),nC=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.applyOptions=function(i){t_(i),t.prototype.applyOptions.call(this,i)},i}(nx),nP={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},nM={width:0,height:0,layout:{backgroundColor:"#FFFFFF",textColor:"#191919",fontSize:11,fontFamily:tY},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:s({},nP),leftPriceScale:s(s({},nP),{visible:!1}),rightPriceScale:s(s({},nP),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:{color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:tY,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},localization:{locale:i1?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0}},nF={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},nI={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},nk={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:""},nT={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:""},n0={color:"#26a69a",base:0},nE={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},nL=function(){function t(t,i){this.Ec=t,this.Ud=i}return t.prototype.applyOptions=function(t){this.Ec.ct().Fl(this.Ud,t)},t.prototype.options=function(){return this.Qt().I()},t.prototype.width=function(){return tR(this.Ud)?this.Ec.vd("left"===this.Ud?"left":"right"):0},t.prototype.Qt=function(){return u(this.Ec.ct().Il(this.Ud)).J},t}(),nD=function(){function t(t){this.qd=new J,this.ir=new J,this.ri=t,this.Oo().$r().Gi(this.Hd.bind(this)),this.Oo().Xr().Gi(this.Yd.bind(this))}return t.prototype.un=function(){this.Oo().$r().sn(this),this.Oo().Xr().sn(this),this.qd.un()},t.prototype.scrollPosition=function(){return this.Oo().Ir()},t.prototype.scrollToPosition=function(t,i){i?this.Oo().Kr(t,1e3):this.ri.wr(t)},t.prototype.scrollToRealTime=function(){this.Oo().Yr()},t.prototype.getVisibleRange=function(){var t,i,n=this.Oo().pr();return null===n?null:{from:null!==(t=n.from.Cs)&&void 0!==t?t:n.from.Ds,to:null!==(i=n.to.Cs)&&void 0!==i?i:n.to.Ds}},t.prototype.setVisibleRange=function(t){var i={from:n$(t.from),to:n$(t.to)},n=this.Oo().Sr(i);this.ri.ff(n)},t.prototype.getVisibleLogicalRange=function(){var t=this.Oo().gr();return null===t?null:{from:t.ss(),to:t.rs()}},t.prototype.setVisibleLogicalRange=function(t){o(t.from<=t.to,"The from index cannot be after the to index."),this.ri.ff(t)},t.prototype.resetTimeScale=function(){this.ri.xe()},t.prototype.fitContent=function(){this.ri.Gr()},t.prototype.logicalToCoordinate=function(t){var i=this.ri.q();return i.ii()?null:i.tt(t)},t.prototype.coordinateToLogical=function(t){var i=this.ri.q();return i.ii()?null:i.Vr(t)},t.prototype.timeToCoordinate=function(t){var i=n$(t),n=this.ri.q(),e=n.Mr(i,!1);return null===e?null:n.tt(e)},t.prototype.coordinateToTime=function(t){var i,n=this.ri.q(),e=n.Vr(t),s=n.ei(e);return null===s?null:null!==(i=s.Cs)&&void 0!==i?i:s.Ds},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.qd.Gi(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.qd.hn(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.ir.Gi(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.ir.hn(t)},t.prototype.applyOptions=function(t){this.Oo().rh(t)},t.prototype.options=function(){return d(this.Oo().I())},t.prototype.Oo=function(){return this.ri.q()},t.prototype.Hd=function(){this.qd.en()&&this.qd.rn(this.getVisibleRange())},t.prototype.Yd=function(){this.ir.en()&&this.ir.rn(this.getVisibleLogicalRange())},t}();function nV(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8&&!(1e-8>Math.abs(Math.round(t)-t));i++)t*=10;return i}(i.minMove))}}function nY(t){return function(t){if(v(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&v(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var e=t.handleScroll;v(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var i=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=a(t.leftPriceScale,t.priceScale),t.rightPriceScale=a(t.rightPriceScale,t.priceScale),"left"===i&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(t),t}var nO=function(){function t(t,i){var n=this;this.Kd=new n_,this.$d=new Map,this.Xd=new Map,this.Zd=new J,this.Jd=new J,this.Gd=new J;var e=void 0===i?d(nM):a(d(nM),nY(i));this.Ec=new nn(t,e),this.Ec.o_().Gi(function(t){n.Zd.en()&&n.Zd.rn(n.Qd(t()))},this),this.Ec.Ul().Gi(function(t){n.Jd.en()&&n.Jd.rn(n.Qd(t()))},this),this.Ec.ad().Gi(function(t){n.Gd.en()&&n.Gd.rn(n.tw(t()))},this);var s=this.Ec.ct();this.iw=new nD(s)}return t.prototype.remove=function(){this.Ec.o_().sn(this),this.Ec.Ul().sn(this),this.iw.un(),this.Ec.un(),this.$d.clear(),this.Xd.clear(),this.Zd.un(),this.Jd.un(),this.Kd.un()},t.prototype.resize=function(t,i,n){this.Ec.hd(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),nV((t=n8(t)).priceFormat);var i=a(d(nE),nT,t),n=this.Ec.ct().af("Area",i),e=new nx(n,this,this);return this.$d.set(e,n),this.Xd.set(n,e),e},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),nV((t=n8(t)).priceFormat);var i=a(d(nE),nI,t),n=this.Ec.ct().af("Bar",i),e=new nx(n,this,this);return this.$d.set(e,n),this.Xd.set(n,e),e},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),t_(t=n8(t)),nV(t.priceFormat);var i=a(d(nE),nF,t),n=this.Ec.ct().af("Candlestick",i),e=new nC(n,this,this);return this.$d.set(e,n),this.Xd.set(n,e),e},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),nV((t=n8(t)).priceFormat);var i=a(d(nE),n0,t),n=this.Ec.ct().af("Histogram",i),e=new nx(n,this,this);return this.$d.set(e,n),this.Xd.set(n,e),e},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),nV((t=n8(t)).priceFormat);var i=a(d(nE),nk,t),n=this.Ec.ct().af("Line",i),e=new nx(n,this,this);return this.$d.set(e,n),this.Xd.set(n,e),e},t.prototype.removeSeries=function(t){var i=h(this.$d.get(t)),n=this.Kd.Yl(i);this.Ec.ct().Yl(i),this.nw(n),this.$d.delete(t),this.Xd.delete(i)},t.prototype.jd=function(t,i){this.nw(this.Kd.Dd(t,i))},t.prototype.oo=function(t,i){this.nw(this.Kd.Bd(t,i))},t.prototype.subscribeClick=function(t){this.Zd.Gi(t)},t.prototype.unsubscribeClick=function(t){this.Zd.hn(t)},t.prototype.subscribeCrosshairMove=function(t){this.Jd.Gi(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.Jd.hn(t)},t.prototype.priceScale=function(t){return void 0===t&&(t=this.Ec.ct().cf()),new nL(this.Ec,t)},t.prototype.timeScale=function(){return this.iw},t.prototype.applyOptions=function(t){this.Ec.rh(nY(t))},t.prototype.options=function(){return this.Ec.I()},t.prototype.takeScreenshot=function(){return this.Ec.od()},t.prototype.subscribePaneResize=function(t){this.Gd.Gi(t)},t.prototype.unsubscribePaneResize=function(t){this.Gd.hn(t)},t.prototype.removePane=function(t){this.Ec.ct().Hl(t)},t.prototype.swapPane=function(t,i){this.Ec.ct().Kl(t,i)},t.prototype.nw=function(t){var i=this.Ec.ct();i.ef(t.q.Br,t.q.Fd),t.Vd.forEach(function(t,i){return i.oo(t.zd,t.Bl)}),i.zr()},t.prototype.hw=function(t){return h(this.Xd.get(t))},t.prototype.Qd=function(t){var i=this,n=new Map;t.gd.forEach(function(t,e){n.set(i.hw(e),t)});var e=void 0===t.md?void 0:this.hw(t.md);return{time:t.P&&(t.P.Cs||t.P.Ds),point:t.bd,hoveredSeries:e,hoveredMarkerId:t.pd,seriesPrices:n}},t.prototype.tw=function(t){return{top:{index:t.Jc.Fs,height:t.Jc.Mt},bottom:{index:t.Ee.Fs,height:t.Ee.Mt}}},t}(),nK=Object.freeze({__proto__:null,version:function(){return"3.6.0-dev+202108241702"},get LineStyle(){return K},get LineType(){return O},get CrosshairMode(){return R},get PriceScaleMode(){return tf},get PriceLineSource(){return t$},get TickMarkType(){return tk},isBusinessDay:tD,isUTCTimestamp:tV,createChart:function(t,i){var n;if(p(t)){var e=document.getElementById(t);o(null!==e,"Cannot find element in DOM with id="+t),n=e}else n=t;return new nO(n,i)}});window.LightweightCharts=nK}();